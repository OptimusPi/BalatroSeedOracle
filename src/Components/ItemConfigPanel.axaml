<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BalatroSeedOracle.ViewModels"
             x:Class="BalatroSeedOracle.Components.ItemConfigPanel"
             x:DataType="vm:ItemConfigPanelViewModel">

    <Border Background="{StaticResource ModalBackground}"
            BorderBrush="{StaticResource ModalBorder}"
            BorderThickness="0"
            CornerRadius="8"
            Padding="0">
        <Grid RowDefinitions="Auto,*,Auto">
            <!-- Header -->
            <Border Grid.Row="0"
                    Background="{StaticResource DarkBackground}"
                    BorderThickness="0,0,0,2"
                    BorderBrush="{StaticResource ModalBorder}"
                    Padding="16,12">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0"
                               Text="{Binding ItemName}"
                               FontFamily="{StaticResource BalatroFont}"
                               FontSize="16"
                               Foreground="{StaticResource Gold}"
                               VerticalAlignment="Center"/>
                    <Button Grid.Column="1"
                            Content="Ã—"
                            Command="{Binding CloseCommand}"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{StaticResource LightGrey}"
                            FontSize="24"
                            Width="32"
                            Height="32"
                            Padding="0"
                            Cursor="Hand">
                        <Button.Styles>
                            <Style Selector="Button:pointerover">
                                <Setter Property="Foreground" Value="{StaticResource White}"/>
                            </Style>
                        </Button.Styles>
                    </Button>
                </Grid>
            </Border>

            <!-- Scrollable Configuration Area -->
            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          Padding="12">
                <StackPanel Spacing="8">

                    <!-- Label Configuration (ONLY FOR SHOULD ITEMS!) -->
                    <StackPanel Spacing="4" IsVisible="{Binding IsLabelVisible}">
                        <TextBlock Text="LABEL"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <TextBox Text="{Binding Label, Mode=TwoWay}"
                                 Watermark="e.g., 'Bram Neg'"
                                 FontSize="12"
                                 Height="28"/>
                    </StackPanel>

                    <!-- Antes -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="ANTES"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <WrapPanel Orientation="Horizontal">
                            <CheckBox Content="All" IsChecked="{Binding AllAntesSelected}" Margin="0,0,6,2"/>
                            <CheckBox Content="1" IsChecked="{Binding Ante1Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="2" IsChecked="{Binding Ante2Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="3" IsChecked="{Binding Ante3Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="4" IsChecked="{Binding Ante4Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="5" IsChecked="{Binding Ante5Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="6" IsChecked="{Binding Ante6Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="7" IsChecked="{Binding Ante7Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                            <CheckBox Content="8" IsChecked="{Binding Ante8Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllAntesSelected}"/>
                        </WrapPanel>
                    </StackPanel>

                    <!-- Shop Slots -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="SHOP SLOTS"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <WrapPanel Orientation="Horizontal">
                            <CheckBox Content="All" IsChecked="{Binding AllShopSlotsSelected}" Margin="0,0,6,2"/>
                            <CheckBox Content="1" IsChecked="{Binding ShopSlot1Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllShopSlotsSelected}"/>
                            <CheckBox Content="2" IsChecked="{Binding ShopSlot2Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllShopSlotsSelected}"/>
                            <CheckBox Content="3" IsChecked="{Binding ShopSlot3Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllShopSlotsSelected}"/>
                            <CheckBox Content="4" IsChecked="{Binding ShopSlot4Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllShopSlotsSelected}"/>
                        </WrapPanel>
                    </StackPanel>

                    <!-- Pack Positions -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="PACK POSITIONS"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <WrapPanel Orientation="Horizontal">
                            <CheckBox Content="All" IsChecked="{Binding AllPackPositionsSelected}" Margin="0,0,6,2"/>
                            <CheckBox Content="1" IsChecked="{Binding PackPos1Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllPackPositionsSelected}"/>
                            <CheckBox Content="2" IsChecked="{Binding PackPos2Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllPackPositionsSelected}"/>
                            <CheckBox Content="3" IsChecked="{Binding PackPos3Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllPackPositionsSelected}"/>
                            <CheckBox Content="4" IsChecked="{Binding PackPos4Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllPackPositionsSelected}"/>
                            <CheckBox Content="5" IsChecked="{Binding PackPos5Selected}" Margin="0,0,6,2" IsEnabled="{Binding !AllPackPositionsSelected}"/>
                        </WrapPanel>
                    </StackPanel>

                    <!-- Edition Setting Helper (Joker/SoulJoker/StandardCard only) -->
                    <StackPanel Spacing="4" IsVisible="{Binding IsEditionHelperVisible}">
                        <TextBlock Text="EDITION"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <Button Content="Edit Edition"
                                Height="32"
                                FontSize="11"
                                Classes="btn-blue"
                                Margin="0,0,0,4"/>
                    </StackPanel>

                    <!-- Sources -->
                    <StackPanel Spacing="4">
                        <TextBlock Text="SOURCES"
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="11"
                                   Foreground="{StaticResource Gold}"/>
                        <StackPanel>
                            <CheckBox Content="Booster Packs" IsChecked="{Binding IncludeBoosterPacks}" Margin="0,0,0,2"/>
                            <CheckBox Content="Shop Stream" IsChecked="{Binding IncludeShopStream}" Margin="0,0,0,2"/>
                            <CheckBox Content="Skip Tags" IsChecked="{Binding IncludeSkipTags}"/>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>

            <!-- Footer Buttons -->
            <Border Grid.Row="2"
                    Background="{StaticResource DarkBackground}"
                    BorderThickness="0,2,0,0"
                    BorderBrush="{StaticResource ModalBorder}"
                    Padding="12">
                <Grid ColumnDefinitions="Auto,8,Auto">
                    <Button Grid.Column="0"
                            Content="Cancel"
                            Command="{Binding CancelCommand}"
                            Classes="btn-cancel"
                            Height="32"
                            FontSize="12"
                            Width="100"/>
                    <Button Grid.Column="2"
                            Content="Apply"
                            Command="{Binding ApplyCommand}"
                            Classes="btn-blue"
                            Height="32"
                            FontSize="12"
                            Width="100"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</UserControl>
