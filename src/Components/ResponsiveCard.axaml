<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:i="using:Avalonia.Xaml.Interactivity"
             xmlns:behaviors="using:BalatroSeedOracle.Behaviors"
             xmlns:local="clr-namespace:BalatroSeedOracle.Components"
             x:Class="BalatroSeedOracle.Components.ResponsiveCard">
    
    <UserControl.Styles>
        <Style Selector="local|ResponsiveCard.selected-need Border#CardBorder">
            <Setter Property="BorderBrush" Value="{StaticResource AccentGreen}"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="Background" Value="{StaticResource ResponsiveCardGreen}"/>
        </Style>

        <Style Selector="local|ResponsiveCard.selected-want Border#CardBorder">
            <Setter Property="BorderBrush" Value="{StaticResource ToggleRed}"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="Background" Value="{StaticResource ResponsiveCardRed}"/>
        </Style>

        <Style Selector="local|ResponsiveCard.selected-need:pointerover Border#CardBorder">
            <Setter Property="BorderBrush" Value="{StaticResource ToggleGreen}"/>
            <Setter Property="Background" Value="{StaticResource ResponsiveCardGreenHover}"/>
        </Style>

        <Style Selector="local|ResponsiveCard.selected-want:pointerover Border#CardBorder">
            <Setter Property="BorderBrush" Value="{StaticResource ToggleRedHover}"/>
            <Setter Property="Background" Value="{StaticResource ResponsiveCardRedHover}"/>
        </Style>
        
        <!-- Soul image styles for legendary jokers -->
        <Style Selector="Image#SoulImage">
            <Setter Property="Opacity" Value="0.8"/>
        </Style>
    </UserControl.Styles>

    <Border Name="CardBorder"
            Background="Transparent"
            Padding="2"
            MinWidth="80"
            MinHeight="72"
            Cursor="Hand"
            IsHitTestVisible="True"
            RenderTransformOrigin="0.5,0.5">
        <Border.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
                <RotateTransform Angle="0"/>
            </TransformGroup>
        </Border.RenderTransform>
        <i:Interaction.Behaviors>
            <behaviors:BalatroCardSwayBehavior AmbientTilt="0.3" />
        </i:Interaction.Behaviors>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Main card container with layered images -->
            <Grid Grid.Row="0" Margin="6" Name="ImageContainer">
                <!-- Gold background for legendary jokers -->
                <Border Name="LegendaryBackground" 
                        IsVisible="False"
                        CornerRadius="4">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                            <GradientStop Color="{Binding Source={StaticResource GoldGradient1}, Path=Color}" Offset="0" />
                            <GradientStop Color="{Binding Source={StaticResource GoldGradient2}, Path=Color}" Offset="0.5" />
                            <GradientStop Color="{Binding Source={StaticResource GoldGradient1}, Path=Color}" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
                
                <!-- Base card image -->
                <Image Name="CardImage" 
                       Stretch="Uniform"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center" />
                
                <!-- Soul/Face overlay for legendary jokers -->
                <Image Name="SoulImage" 
                       IsVisible="False"
                       Width="64"
                       Height="64"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       RenderTransformOrigin="0.5,0.5">
                    <Image.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="1" ScaleY="1"/>
                            <RotateTransform Angle="0"/>
                        </TransformGroup>
                    </Image.RenderTransform>
                </Image>
                
                <!-- Edition overlay for jokers with editions -->
                <Image Name="EditionOverlay" 
                       IsVisible="False"
                       Width="64"
                       Height="64"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
            </Grid>
            
            <TextBlock Grid.Row="1"
                       Name="CardName"
                       TextAlignment="Center"
                       TextWrapping="Wrap"
                       Foreground="{StaticResource White}"
                       FontFamily="{StaticResource BalatroFont}"
                       FontSize="11"
                       MaxWidth="80"
                       LineHeight="12"
                       Margin="0,3,0,2" />
        </Grid>
    </Border>
    
</UserControl>