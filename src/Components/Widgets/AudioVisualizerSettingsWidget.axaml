<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BalatroSeedOracle.ViewModels"
             xmlns:i="using:Avalonia.Xaml.Interactivity"
             xmlns:behaviors="using:BalatroSeedOracle.Behaviors"
             x:Class="BalatroSeedOracle.Components.AudioVisualizerSettingsWidget"
             x:DataType="vm:AudioVisualizerSettingsWidgetViewModel"
             x:CompileBindings="True">

    <!-- Single container with the drag behavior -->
    <Grid HorizontalAlignment="Left" VerticalAlignment="Top"
          ZIndex="{Binding WidgetZIndex}">
        <i:Interaction.Behaviors>
            <behaviors:DraggableWidgetBehavior X="{Binding PositionX, Mode=TwoWay}"
                                               Y="{Binding PositionY, Mode=TwoWay}"
                                               DragHandleClass="widget-header" />
        </i:Interaction.Behaviors>

        <!-- Minimized State - Compact Music Icon -->
        <StackPanel IsVisible="{Binding IsMinimized}"
                    ZIndex="1"
                    Spacing="4"
                    PointerPressed="OnMinimizedIconPressed"
                    PointerReleased="OnMinimizedIconReleased">
            <i:Interaction.Behaviors>
                <!-- BALATRO SWAY ANIMATION! -->
                <behaviors:BalatroCardSwayBehavior AmbientTilt="0.2" />
            </i:Interaction.Behaviors>

            <Border Background="{StaticResource ModalGrey}"
                    BorderBrush="{StaticResource ModalBorder}"
                    BorderThickness="2"
                    CornerRadius="8"
                    Width="64" Height="64"
                    Classes="widget-header"
                    Cursor="Hand">
                <TextBlock Text="🎵" FontSize="28" HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
            <TextBlock Text="Audio"
                       FontSize="10"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Expanded State - Full Settings Panel -->
        <Border Classes="widget-window"
                IsVisible="{Binding !IsMinimized}"
                ZIndex="100"
                MinWidth="420"
                MaxWidth="520"
                MaxHeight="650">

            <Grid RowDefinitions="Auto,*">
                <!-- Header with Title and Minimize Button -->
                <Border Grid.Row="0" Classes="widget-header" Padding="12,8">
                    <Grid ColumnDefinitions="Auto,*">
                        <Button Grid.Column="0"
                                Content="↙"
                                Classes="widget-minimize-btn"
                                Command="{Binding MinimizeCommand}"
                                ToolTip.Tip="Minimize"
                                Margin="0,0,8,0"/>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="{Binding WidgetIcon}" FontSize="15" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding WidgetTitle}"
                                       FontSize="13"
                                       FontWeight="Bold"
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Content Area with ScrollViewer -->
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled">

                    <StackPanel Margin="15" Spacing="16">

                        <!-- THEME SELECTION -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Theme" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="14"/>
                            <ComboBox SelectedIndex="{Binding ThemeIndex}" HorizontalAlignment="Stretch" FontSize="12">
                                <ComboBoxItem Content="Default"/>
                                <ComboBoxItem Content="Wave Rider"/>
                                <ComboBoxItem Content="Inferno"/>
                                <ComboBoxItem Content="Frozen"/>
                                <ComboBoxItem Content="Rainbow Cascade"/>
                                <ComboBoxItem Content="Electric Storm"/>
                                <ComboBoxItem Content="Sakura Dream"/>
                                <ComboBoxItem Content="Lunar Eclipse"/>
                                <ComboBoxItem Content="CUSTOMIZE..."/>
                            </ComboBox>
                        </StackPanel>

                        <!-- CUSTOM COLORS (only shown when CUSTOMIZE selected) -->
                        <StackPanel Spacing="10" IsVisible="{Binding IsCustomTheme}">
                            <TextBlock Text="Custom Colors" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="14"/>
                            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                                <StackPanel Grid.Column="0" Spacing="4">
                                    <TextBlock Text="Main" Foreground="{StaticResource White}" FontSize="12"/>
                                    <ComboBox SelectedIndex="{Binding MainColor}" HorizontalAlignment="Stretch" FontSize="11">
                                        <ComboBoxItem Content="Red"/>
                                        <ComboBoxItem Content="Orange"/>
                                        <ComboBoxItem Content="Yellow"/>
                                        <ComboBoxItem Content="Green"/>
                                        <ComboBoxItem Content="Blue"/>
                                        <ComboBoxItem Content="Purple"/>
                                        <ComboBoxItem Content="Brown"/>
                                        <ComboBoxItem Content="White"/>
                                        <ComboBoxItem Content="None"/>
                                    </ComboBox>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Spacing="4">
                                    <TextBlock Text="Accent" Foreground="{StaticResource White}" FontSize="12"/>
                                    <ComboBox SelectedIndex="{Binding AccentColor}" HorizontalAlignment="Stretch" FontSize="11">
                                        <ComboBoxItem Content="Red"/>
                                        <ComboBoxItem Content="Orange"/>
                                        <ComboBoxItem Content="Yellow"/>
                                        <ComboBoxItem Content="Green"/>
                                        <ComboBoxItem Content="Blue"/>
                                        <ComboBoxItem Content="Purple"/>
                                        <ComboBoxItem Content="Brown"/>
                                        <ComboBoxItem Content="White"/>
                                        <ComboBoxItem Content="None"/>
                                    </ComboBox>
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                        <!-- SHADER PARAMETERS - DIRECT CONTROL WITH CUSTOMIZABLE RANGES -->
                        <StackPanel Spacing="10">
                            <TextBlock Text="Shader Parameters" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="14"/>
                            <TextBlock Text="Adjust ranges and values for complete control" Foreground="#80FFFFFF" FontSize="11" Margin="0,-6,0,0"/>

                            <!-- Time -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="Time" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding TimeMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding TimeMin}" Maximum="{Binding TimeMax}" Value="{Binding TimeValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding TimeMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding TimeValue, StringFormat='{}{0:F1}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- SpinTime -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="SpinTime" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding SpinTimeMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding SpinTimeMin}" Maximum="{Binding SpinTimeMax}" Value="{Binding SpinTimeValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding SpinTimeMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding SpinTimeValue, StringFormat='{}{0:F1}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Contrast -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="Contrast" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding ContrastMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding ContrastMin}" Maximum="{Binding ContrastMax}" Value="{Binding ContrastValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding ContrastMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding ContrastValue, StringFormat='{}{0:F1}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- SpinAmount -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="SpinAmount" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding SpinAmountMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding SpinAmountMin}" Maximum="{Binding SpinAmountMax}" Value="{Binding SpinAmountValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding SpinAmountMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding SpinAmountValue, StringFormat='{}{0:F2}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- ParallaxX -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="ParallaxX" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding ParallaxXMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding ParallaxXMin}" Maximum="{Binding ParallaxXMax}" Value="{Binding ParallaxXValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding ParallaxXMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding ParallaxXValue, StringFormat='{}{0:F2}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- ParallaxY -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="ParallaxY" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding ParallaxYMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding ParallaxYMin}" Maximum="{Binding ParallaxYMax}" Value="{Binding ParallaxYValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding ParallaxYMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding ParallaxYValue, StringFormat='{}{0:F2}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- ZoomScale -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="ZoomScale" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding ZoomScaleMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding ZoomScaleMin}" Maximum="{Binding ZoomScaleMax}" Value="{Binding ZoomScaleValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding ZoomScaleMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding ZoomScaleValue, StringFormat='{}{0:F1}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- Saturation -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="Saturation" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding SaturationMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding SaturationMin}" Maximum="{Binding SaturationMax}" Value="{Binding SaturationValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding SaturationMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding SaturationValue, StringFormat='{}{0:F2}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- PixelSize -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="PixelSize" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding PixelSizeMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding PixelSizeMin}" Maximum="{Binding PixelSizeMax}" Value="{Binding PixelSizeValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding PixelSizeMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding PixelSizeValue, StringFormat='{}{0:F0}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- SpinEase -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="SpinEase" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding SpinEaseMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding SpinEaseMin}" Maximum="{Binding SpinEaseMax}" Value="{Binding SpinEaseValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding SpinEaseMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding SpinEaseValue, StringFormat='{}{0:F2}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>

                            <!-- LoopCount (Paint Complexity) -->
                            <Grid ColumnDefinitions="Auto,60,*,60,50" ColumnSpacing="6">
                                <TextBlock Grid.Column="0" Text="LoopCount" Foreground="{StaticResource White}" VerticalAlignment="Center" FontSize="12" MinWidth="80"/>
                                <TextBox Grid.Column="1" Text="{Binding LoopCountMin}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <Slider Grid.Column="2" Minimum="{Binding LoopCountMin}" Maximum="{Binding LoopCountMax}" Value="{Binding LoopCountValue}" VerticalAlignment="Center"/>
                                <TextBox Grid.Column="3" Text="{Binding LoopCountMax}" FontFamily="Consolas" FontSize="10" VerticalAlignment="Center" Padding="4,2"/>
                                <TextBlock Grid.Column="4" Text="{Binding LoopCountValue, StringFormat='{}{0:F0}'}" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="11" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                            </Grid>
                        </StackPanel>

                        <!-- PRESETS -->
                        <StackPanel Spacing="8">
                            <TextBlock Text="Presets" Foreground="{StaticResource Gold}" FontWeight="Bold" FontSize="14"/>
                            <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="6">
                                <ComboBox Grid.Column="0" ItemsSource="{Binding Presets}" SelectedItem="{Binding SelectedPreset}" HorizontalAlignment="Stretch" FontSize="11">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}"/>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                                <Button Grid.Column="1" Content="Load" Command="{Binding LoadPresetCommand}" CommandParameter="{Binding SelectedPreset}" Classes="btn-blue" Padding="8,4" FontSize="11"/>
                                <Button Grid.Column="2" Content="Save" Command="{Binding SavePresetCommand}" Classes="btn-red" Padding="8,4" FontSize="11"/>
                            </Grid>
                        </StackPanel>

                        <!-- ADVANCED (EXPANDER) -->
                        <Expander Header="⚙️ Advanced Settings" FontSize="13" FontWeight="Bold" Foreground="{StaticResource Gold}">
                            <StackPanel Spacing="10" Margin="0,8,0,0">

                                <!-- Audio Event Triggers -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="🔊 Audio Events" Foreground="{StaticResource Gold}" FontWeight="SemiBold" FontSize="13"/>
                                    <CheckBox Content="Seed Found" IsChecked="{Binding SeedFoundTrigger}" Foreground="{StaticResource White}" FontSize="12"/>
                                    <CheckBox Content="High Score" IsChecked="{Binding HighScoreSeedTrigger}" Foreground="{StaticResource White}" FontSize="12"/>
                                    <CheckBox Content="Search Done" IsChecked="{Binding SearchCompleteTrigger}" Foreground="{StaticResource White}" FontSize="12"/>
                                </StackPanel>

                                <!-- Beat Detection -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="🥁 Beat Detection" Foreground="{StaticResource Gold}" FontWeight="SemiBold" FontSize="13"/>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                                        <TextBlock Grid.Column="0" Text="Beat Threshold" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="90"/>
                                        <Slider Grid.Column="1" Value="{Binding BeatThreshold}" Minimum="0" Maximum="1" VerticalAlignment="Center"/>
                                        <TextBlock Grid.Column="2" Text="{Binding BeatThreshold, StringFormat='{}{0:F2}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="35" HorizontalAlignment="Right"/>
                                    </Grid>
                                </StackPanel>

                                <!-- Per-Track Volume Controls -->
                                <StackPanel Spacing="6">
                                    <TextBlock Text="🎚️ Track Volumes" Foreground="{StaticResource Gold}" FontWeight="SemiBold" FontSize="13"/>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Drums1" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Drums1Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Drums1Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Drums2" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Drums2Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Drums2Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Bass1" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Bass1Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Bass1Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Bass2" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Bass2Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Bass2Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Chords1" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Chords1Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Chords1Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Chords2" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Chords2Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Chords2Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Melody1" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Melody1Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Melody1Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                    <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="6">
                                        <TextBlock Grid.Column="0" Text="Melody2" Foreground="{StaticResource White}" FontSize="12" VerticalAlignment="Center" MinWidth="60"/>
                                        <Slider Grid.Column="1" Value="{Binding Melody2Volume}" Minimum="0" Maximum="1"/>
                                        <TextBlock Grid.Column="2" Text="{Binding Melody2Volume, StringFormat='{}{0:P0}'}" Foreground="{StaticResource White}" FontSize="12" MinWidth="40"/>
                                    </Grid>
                                </StackPanel>
                            </StackPanel>
                        </Expander>

                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</UserControl>
