<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="500"
             x:Class="BalatroSeedOracle.Components.Widgets.VisualizerDevWidget"
             Background="#44000000">

    <!-- Professional Visualizer Development Tool -->
    <Border CornerRadius="8" BorderBrush="#80FFFFFF" BorderThickness="1"
            Background="{DynamicResource BalatroCardBackground}">
        <Grid RowDefinitions="Auto,*">

            <!-- Header -->
            <Border Grid.Row="0" Background="#33000000" Padding="10,5">
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <TextBlock Grid.Column="0" Text="ðŸŽ¨" FontSize="20" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="VISUALIZER DEV TOOL" FontWeight="Bold"
                               FontSize="14" Margin="10,0" VerticalAlignment="Center"/>
                    <Button Grid.Column="2" Name="MinimizeButton"
                            Classes="Ghost" Width="24" Height="24">
                        <TextBlock Text="âˆ’" FontSize="16" FontWeight="Bold"/>
                    </Button>
                </Grid>
            </Border>

            <!-- Tab Control -->
            <TabControl Grid.Row="1" Name="MainTabs" Background="Transparent">

                <!-- UNIFORMS TAB - Direct shader parameter control -->
                <TabItem Header="UNIFORMS">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                        <StackPanel Spacing="15">

                            <!-- Time -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Time" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="TimeSlider"
                                                Minimum="0" Maximum="100" Value="0"
                                                TickFrequency="0.1" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="TimeTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Spin Time -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Spin Time" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="SpinTimeSlider"
                                                Minimum="0" Maximum="100" Value="0"
                                                TickFrequency="0.1" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="SpinTimeTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Contrast -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Contrast" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="ContrastSlider"
                                                Minimum="0.1" Maximum="10" Value="2"
                                                TickFrequency="0.01" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="ContrastTextBox"
                                                 Text="2.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                    <TextBlock Text="Range: 0.1 - 10.0" FontSize="9"
                                               Foreground="#80FFFFFF" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </Border>

                            <!-- Spin Amount -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Spin Amount" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="SpinAmountSlider"
                                                Minimum="0" Maximum="1" Value="0.3"
                                                TickFrequency="0.001" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="SpinAmountTextBox"
                                                 Text="0.3" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                    <TextBlock Text="Range: 0.0 - 1.0" FontSize="9"
                                               Foreground="#80FFFFFF" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </Border>

                            <!-- Parallax X -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Parallax X" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="ParallaxXSlider"
                                                Minimum="-1" Maximum="1" Value="0"
                                                TickFrequency="0.001" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="ParallaxXTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Parallax Y -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Parallax Y" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="ParallaxYSlider"
                                                Minimum="-1" Maximum="1" Value="0"
                                                TickFrequency="0.001" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="ParallaxYTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Zoom Scale -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Zoom Scale" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="ZoomScaleSlider"
                                                Minimum="-50" Maximum="50" Value="0"
                                                TickFrequency="0.1" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="ZoomScaleTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Saturation Amount -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Saturation Amount" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid ColumnDefinitions="*,80">
                                        <Slider Grid.Column="0" Name="SaturationAmountSlider"
                                                Minimum="0" Maximum="1" Value="0"
                                                TickFrequency="0.001" IsSnapToTickEnabled="False"/>
                                        <TextBox Grid.Column="1" Name="SaturationAmountTextBox"
                                                 Text="0.0" Margin="5,0,0,0"
                                                 FontFamily="Consolas" FontSize="11"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Color Pickers -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="10">
                                    <TextBlock Text="Colors" FontWeight="Bold" FontSize="11"
                                               Foreground="#FFD700"/>
                                    <Grid RowDefinitions="Auto,Auto,Auto" RowSpacing="8">
                                        <Button Grid.Row="0" Name="MainColorButton"
                                                Height="30" Background="#FF4C40">
                                            <TextBlock Text="Main Color" Foreground="White"/>
                                        </Button>
                                        <Button Grid.Row="1" Name="AccentColorButton"
                                                Height="30" Background="#0093FF">
                                            <TextBlock Text="Accent Color" Foreground="White"/>
                                        </Button>
                                        <Button Grid.Row="2" Name="BackgroundColorButton"
                                                Height="30" Background="#1E2B2D">
                                            <TextBlock Text="Background Color" Foreground="White"/>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- AUDIO MIXER TAB - 8 track mixer with peak meters -->
                <TabItem Header="MIXER">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                        <StackPanel Spacing="10">

                            <!-- Drums 1 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Drums 1" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Drums1VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Drums1MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Drums1PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Drums 2 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Drums 2" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Drums2VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Drums2MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Drums2PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Bass 1 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Bass 1" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Bass1VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Bass1MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Bass1PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Bass 2 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Bass 2" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Bass2VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Bass2MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Bass2PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Chords 1 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Chords 1" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Chords1VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Chords1MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Chords1PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Chords 2 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Chords 2" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Chords2VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Chords2MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Chords2PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Melody 1 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Melody 1" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Melody1VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Melody1MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Melody1PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                            <!-- Melody 2 -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <Grid ColumnDefinitions="80,*,40,60">
                                    <TextBlock Grid.Column="0" Text="Melody 2" FontWeight="Bold"
                                               FontSize="11" VerticalAlignment="Center"/>
                                    <Slider Grid.Column="1" Name="Melody2VolumeSlider"
                                            Minimum="0" Maximum="100" Value="100" Margin="5,0"/>
                                    <CheckBox Grid.Column="2" Name="Melody2MuteCheckBox"
                                              Content="M" Margin="5,0"/>
                                    <Border Grid.Column="3" Background="#111" CornerRadius="2"
                                            Margin="5,0,0,0" Padding="2">
                                        <TextBlock Name="Melody2PeakText" Text="0.00"
                                                   FontFamily="Consolas" FontSize="10"
                                                   Foreground="#0F0" HorizontalAlignment="Center"/>
                                    </Border>
                                </Grid>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- MAPPINGS TAB - Connect audio to visual parameters -->
                <TabItem Header="MAPPINGS">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                        <StackPanel Spacing="10">
                            <TextBlock Text="Audio â†’ Visual Mappings" FontWeight="Bold"
                                       FontSize="12" Foreground="#FFD700"/>

                            <!-- Mapping for Contrast -->
                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel Spacing="5">
                                    <TextBlock Text="Contrast â† " FontWeight="Bold" FontSize="11"/>
                                    <ComboBox Name="ContrastSourceCombo" SelectedIndex="0">
                                        <ComboBoxItem>None</ComboBoxItem>
                                        <ComboBoxItem>Drums</ComboBoxItem>
                                        <ComboBoxItem>Bass</ComboBoxItem>
                                        <ComboBoxItem>Chords</ComboBoxItem>
                                        <ComboBoxItem>Melody</ComboBoxItem>
                                    </ComboBox>
                                    <Grid ColumnDefinitions="*,*" ColumnSpacing="5">
                                        <TextBox Grid.Column="0" Name="ContrastMinText"
                                                 Watermark="Min (0.1)" FontSize="10"/>
                                        <TextBox Grid.Column="1" Name="ContrastMaxText"
                                                 Watermark="Max (10.0)" FontSize="10"/>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- More mappings would go here... -->

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

                <!-- PRESETS TAB - Save/Load JSON configurations -->
                <TabItem Header="PRESETS">
                    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                        <StackPanel Spacing="10">

                            <TextBlock Text="Preset Management" FontWeight="Bold"
                                       FontSize="12" Foreground="#FFD700"/>

                            <TextBox Name="PresetNameTextBox"
                                     Watermark="Enter preset name..."/>

                            <Grid ColumnDefinitions="*,*" ColumnSpacing="5">
                                <Button Grid.Column="0" Name="SavePresetButton"
                                        Content="ðŸ’¾ Save" Classes="Primary"/>
                                <Button Grid.Column="1" Name="LoadPresetButton"
                                        Content="ðŸ“ Load" Classes="Secondary"/>
                            </Grid>

                            <Border Background="#22FFFFFF" CornerRadius="4" Padding="8">
                                <StackPanel>
                                    <TextBlock Text="Community Presets" FontWeight="Bold"
                                               FontSize="11" Margin="0,0,0,5"/>
                                    <ListBox Name="PresetListBox" Height="200">
                                        <!-- Preset items will be added dynamically -->
                                    </ListBox>
                                </StackPanel>
                            </Border>

                            <Button Name="ExportJsonButton" Content="ðŸ“¤ Export JSON"
                                    HorizontalAlignment="Stretch"/>
                            <Button Name="ImportJsonButton" Content="ðŸ“¥ Import JSON"
                                    HorizontalAlignment="Stretch"/>
                            <Button Name="ShareButton" Content="ðŸŒ Share to Community"
                                    HorizontalAlignment="Stretch" Classes="Success"/>

                        </StackPanel>
                    </ScrollViewer>
                </TabItem>

            </TabControl>

        </Grid>
    </Border>

</UserControl>