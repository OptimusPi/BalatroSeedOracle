<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="using:Oracle.Controls"
             x:Class="Oracle.Components.SearchWidget"
             x:CompileBindings="False">
    
    <UserControl.Styles>
        <!-- Main widget container - Balatro card style -->
        <Style Selector="Border.widget-container">
            <Setter Property="Background" Value="#4f6367"/>
            <Setter Property="CornerRadius" Value="20"/>
            <Setter Property="BorderBrush" Value="#7A9E9F"/>
            <Setter Property="BorderThickness" Value="4"/>
            <Setter Property="BoxShadow" Value="0 8 24 #000000"/>
        </Style>
        
        <!-- Header section -->
        <Style Selector="Border.widget-header">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="CornerRadius" Value="20,20,0,0"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="BorderBrush" Value="#555a5c"/>
            <Setter Property="BorderThickness" Value="0,0,0,3"/>
        </Style>
        
        <!-- Content sections - like Balatro's shop/settings panels -->
        <Style Selector="Border.content-section">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="BorderBrush" Value="#555a5c"/>
            <Setter Property="BorderThickness" Value="0,0,0,3"/>
            <Setter Property="Margin" Value="3"/>
        </Style>
        
        <!-- Footer section -->
        <Style Selector="Border.widget-footer">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="CornerRadius" Value="0,0,20,20"/>
            <Setter Property="Padding" Value="20,15,20,20"/>
        </Style>
        
        <!-- Terminal/console area - like Balatro's settings text -->
        <Style Selector="Border.terminal-area">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderBrush" Value="#666a6c"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="BoxShadow" Value="inset 0 3 8 #20000000"/>
        </Style>
        
        <!-- Parameter boxes - like Balatro's input fields -->
        <Style Selector="Border.param-box">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderBrush" Value="#666a6c"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="4"/>
        </Style>
        
        <!-- Labels - matching Balatro's style -->
        <Style Selector="TextBlock.param-label">
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
        
        <!-- Terminal text -->
        <Style Selector="TextBlock.terminal-text">
            <Setter Property="FontFamily" Value="Cascadia Code, Consolas, monospace"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#00ff66"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
        
        <!-- Window control buttons - simplified -->
        <Style Selector="Button.window-btn">
            <Setter Property="Width" Value="32"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.minimize-btn">
            <Setter Property="Background" Value="{StaticResource Blue}"/>
            <Setter Property="BorderBrush" Value="#004d7a"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
        </Style>
        
        <Style Selector="Button.close-btn">
            <Setter Property="Background" Value="{StaticResource Red}"/>
            <Setter Property="BorderBrush" Value="#8b1538"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
        </Style>
        
        <!-- Main action button -->
        <Style Selector="Button.main-action">
            <Setter Property="MinHeight" Value="48"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </UserControl.Styles>
    
    <Grid>
        <!-- Minimized State - Simple search icon like Balatro UI elements -->
        <Grid Name="MinimizedView" IsVisible="False">
            <Border Classes="widget-container" 
                    Width="80" Height="80"
                    Cursor="Hand"
                    PointerPressed="OnMinimizedClick">
                <Grid>
                    <!-- Main icon area -->
                    <Border Background="#374244" 
                            CornerRadius="16"
                            Margin="8">
                        <StackPanel HorizontalAlignment="Center" 
                                    VerticalAlignment="Center">
                            <TextBlock Text="🔍" 
                                       FontSize="28"
                                       HorizontalAlignment="Center"/>
                            <TextBlock Text="SEARCH" 
                                       FontFamily="{StaticResource BalatroFont}"
                                       FontSize="10"
                                       FontWeight="Bold"
                                       Foreground="#CCCCCC"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Notification badge -->
                    <Border Name="NotificationBadge"
                            Background="{StaticResource Red}"
                            CornerRadius="12"
                            Width="24" Height="24"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Top"
                            Margin="0,-8,-8,0"
                            BorderBrush="#8b1538"
                            BorderThickness="2"
                            IsVisible="False">
                        <TextBlock Name="NotificationCount"
                                   Text="0"
                                   FontSize="12"
                                   FontWeight="Bold"
                                   FontFamily="{StaticResource BalatroFont}"
                                   Foreground="White"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Border>
                </Grid>
            </Border>
        </Grid>
        
        <!-- Expanded State - Balatro settings/shop panel style -->
        <Border Name="ExpandedView" 
                Classes="widget-container"
                Width="520" 
                MaxHeight="650"
                IsVisible="True">
            <Grid RowDefinitions="Auto,*,Auto">
                
                <!-- Header - like Balatro's modal titles -->
                <Border Grid.Row="0" Classes="widget-header">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <StackPanel Grid.Column="0" 
                                    Orientation="Horizontal" 
                                    VerticalAlignment="Center"
                                    Margin="20,0,0,0">
                            <TextBlock Text="🔍" 
                                       FontSize="20" 
                                       Margin="0,0,8,0"/>
                            <TextBlock Text="SEED SEARCH" 
                                       FontFamily="{StaticResource BalatroFont}"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="#FFFFFF"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                        
                        <TextBlock Grid.Column="1"
                                   Name="StatusText"
                                   Text=""
                                   FontFamily="{StaticResource BalatroFont}"
                                   FontSize="14"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   Foreground="#CCCCCC"/>
                        
                        <StackPanel Grid.Column="2"
                                    Orientation="Horizontal"
                                    Margin="0,0,15,0">
                            <Button Classes="window-btn minimize-btn"
                                    Content="—"
                                    Click="OnMinimizeClick"
                                    ToolTip.Tip="Minimize"/>
                            <Button Classes="window-btn close-btn"
                                    Content="✕"
                                    Click="OnCloseClick"
                                    ToolTip.Tip="Close"/>
                        </StackPanel>
                    </Grid>
                </Border>
                
                <!-- Main Content Area -->
                <Border Grid.Row="1" Classes="content-section">
                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                  HorizontalScrollBarVisibility="Disabled"
                                  Padding="20,15">
                        <StackPanel Spacing="20">
                            
                            <!-- Filter Selection - like Balatro's deck selection -->
                            <StackPanel>
                                <TextBlock Text="FILTER CONFIG"
                                           Classes="param-label"
                                           FontSize="14"
                                           Margin="0,0,0,10"/>
                                <Grid ColumnDefinitions="*,15,Auto">
                                    <TextBox Grid.Column="0"
                                             Name="ConfigPathBox" 
                                             IsReadOnly="True"
                                             Background="#2d2d2d"
                                             BorderBrush="#666a6c"
                                             BorderThickness="2"
                                             CornerRadius="8"
                                             FontSize="14"
                                             Height="40"
                                             Padding="12,8"
                                             FontFamily="{StaticResource BalatroFont}"
                                             Foreground="#E2E2E3"
                                             Watermark="No filter selected"/>
                                             
                                    <Button Grid.Column="2"
                                            Name="LoadConfigButton" 
                                            Content="LOAD FILTER" 
                                            Classes="btn-orange"
                                            Height="40"
                                            MinWidth="140"
                                            FontSize="14"
                                            FontFamily="{StaticResource BalatroFont}"
                                            FontWeight="Bold"
                                            Click="OnLoadConfigClick"/>
                                </Grid>
                                
                                <!-- Config Status -->
                                <Border Name="ConfigLoadedIndicator"
                                        Background="{StaticResource Green}"
                                        CornerRadius="8"
                                        Padding="12,6"
                                        Margin="0,10,0,0"
                                        IsVisible="False"
                                        HorizontalAlignment="Left">
                                    <TextBlock Text="✓ Filter loaded and ready" 
                                               FontSize="12"
                                               FontFamily="{StaticResource BalatroFont}"
                                               FontWeight="Bold"
                                               Foreground="#000000"/>
                                </Border>
                            </StackPanel>
                            
                            <!-- Parameters Grid - like Balatro's settings -->
                            <Border Classes="param-box">
                                <StackPanel>
                                    <TextBlock Text="RUN PARAMETERS"
                                               Classes="param-label"
                                               FontSize="14"
                                               Margin="0,0,0,15"/>
                                    
                                    <!-- Row 1: Deck and Stake -->
                                    <Grid ColumnDefinitions="*,15,*" Margin="0,0,0,15">
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="DECK" Classes="param-label"/>
                                            <ComboBox Name="DeckComboBox"
                                                      FontFamily="{StaticResource BalatroFont}"
                                                      FontSize="14"
                                                      Background="#4f6367"
                                                      BorderBrush="#7A9E9F"
                                                      BorderThickness="2"
                                                      Height="36"
                                                      SelectedIndex="0">
                                                <ComboBoxItem Content="Red Deck"/>
                                                <ComboBoxItem Content="Blue Deck"/>
                                                <ComboBoxItem Content="Yellow Deck"/>
                                                <ComboBoxItem Content="Green Deck"/>
                                                <ComboBoxItem Content="Black Deck"/>
                                                <ComboBoxItem Content="Magic Deck"/>
                                                <ComboBoxItem Content="Nebula Deck"/>
                                                <ComboBoxItem Content="Ghost Deck"/>
                                                <ComboBoxItem Content="Abandoned Deck"/>
                                                <ComboBoxItem Content="Checkered Deck"/>
                                                <ComboBoxItem Content="Zodiac Deck"/>
                                                <ComboBoxItem Content="Painted Deck"/>
                                                <ComboBoxItem Content="Anaglyph Deck"/>
                                                <ComboBoxItem Content="Plasma Deck"/>
                                                <ComboBoxItem Content="Erratic Deck"/>
                                            </ComboBox>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="STAKE" Classes="param-label"/>
                                            <ComboBox Name="StakeComboBox"
                                                      FontFamily="{StaticResource BalatroFont}"
                                                      FontSize="14"
                                                      Background="#4f6367"
                                                      BorderBrush="#7A9E9F"
                                                      BorderThickness="2"
                                                      Height="36"
                                                      SelectedIndex="0">
                                                <ComboBoxItem Content="White Stake"/>
                                                <ComboBoxItem Content="Red Stake"/>
                                                <ComboBoxItem Content="Green Stake"/>
                                                <ComboBoxItem Content="Black Stake"/>
                                                <ComboBoxItem Content="Blue Stake"/>
                                                <ComboBoxItem Content="Purple Stake"/>
                                                <ComboBoxItem Content="Orange Stake"/>
                                                <ComboBoxItem Content="Gold Stake"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>
                                    
                                    <!-- Row 2: Threads and Min Score -->
                                    <Grid ColumnDefinitions="*,15,*">
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="THREADS" Classes="param-label"/>
                                            <controls:BalatroSpinnerControl Name="ThreadsSpinner"
                                                                            Value="8"
                                                                            Minimum="1"
                                                                            Maximum="32"
                                                                            FontFamily="{StaticResource BalatroFont}"
                                                                            FontSize="16"
                                                                            Background="#4f6367"
                                                                            BorderBrush="#7A9E9F"
                                                                            Height="36"/>
                                        </StackPanel>
                                        
                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="MIN SCORE" Classes="param-label"/>
                                            <controls:BalatroSpinnerControl Name="MinScoreSpinner"
                                                                            Value="0"
                                                                            Minimum="0"
                                                                            Maximum="999"
                                                                            FontFamily="{StaticResource BalatroFont}"
                                                                            FontSize="16"
                                                                            Background="#4f6367"
                                                                            BorderBrush="#7A9E9F"
                                                                            Height="36"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                            
                            <!-- Console/Terminal Area - like Balatro's text areas -->
                            <Border Classes="param-box">
                                <StackPanel>
                                    <TextBlock Text="CONSOLE"
                                               Classes="param-label"
                                               FontSize="14"
                                               Margin="0,0,0,10"/>
                                    <Border Classes="terminal-area" MinHeight="140">
                                        <Grid>
                                            <ScrollViewer Name="TerminalScrollViewer"
                                                          VerticalScrollBarVisibility="Auto"
                                                          HorizontalScrollBarVisibility="Auto"
                                                          MaxHeight="200">
                                                <TextBlock Name="TerminalOutput" 
                                                           Classes="terminal-text"
                                                           Text="Ready to search! Load a filter and click START SEARCH."/>
                                            </ScrollViewer>
                                            
                                            <Button Name="ClearConsoleButton"
                                                    Content="CLEAR"
                                                    Background="#44000000"
                                                    Foreground="#888888"
                                                    FontFamily="{StaticResource BalatroFont}"
                                                    FontSize="10"
                                                    FontWeight="Bold"
                                                    Height="24"
                                                    Width="60"
                                                    VerticalAlignment="Top"
                                                    HorizontalAlignment="Right"
                                                    Margin="0,5,5,0"
                                                    CornerRadius="6"
                                                    BorderBrush="#666666"
                                                    BorderThickness="1"
                                                    Cursor="Hand"
                                                    Click="OnClearConsoleClick"/>
                                        </Grid>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
                
                <!-- Footer - Action buttons like Balatro's button layout -->
                <Border Grid.Row="2" Classes="widget-footer">
                    <Grid ColumnDefinitions="*,15,Auto,15,Auto">
                        <!-- Main Search Button -->
                        <Button Grid.Column="0"
                                Name="CookButton" 
                                Content="START SEARCH" 
                                Classes="btn-green main-action"
                                Click="OnCookClick" 
                                IsEnabled="False"/>
                        
                        <!-- Results Button -->
                        <Button Grid.Column="2"
                                Name="ViewResultsButton"
                                Content="VIEW RESULTS" 
                                Classes="btn-blue"
                                Height="40"
                                MinWidth="120"
                                FontSize="14"
                                FontFamily="{StaticResource BalatroFont}"
                                FontWeight="Bold"
                                Click="OnViewResultsClick"
                                IsVisible="False"/>
                                
                        <!-- Result Count -->
                        <Border Grid.Column="4"
                                Name="ResultCountBadge"
                                Background="{StaticResource Green}"
                                BorderBrush="#2d5c3e"
                                BorderThickness="2"
                                CornerRadius="12"
                                Padding="15,8"
                                VerticalAlignment="Center"
                                IsVisible="False">
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <TextBlock Text="FOUND:" 
                                           FontFamily="{StaticResource BalatroFont}"
                                           FontSize="12"
                                           FontWeight="Bold"
                                           Foreground="#000000"/>
                                <TextBlock Name="ResultCountText"
                                          Text="0"
                                          FontFamily="{StaticResource BalatroFont}"
                                          FontSize="14"
                                          FontWeight="Bold"
                                          Foreground="#000000"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>