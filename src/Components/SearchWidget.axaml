<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Oracle.Components.SearchWidget"
             x:CompileBindings="False">
    
    <UserControl.Styles>
        <Style Selector="Border.widget-container">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="BorderBrush" Value="#7A9E9F"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="BoxShadow" Value="4 4 8 #00000080"/>
        </Style>
        
        <Style Selector="Border.widget-header">
            <Setter Property="Background" Value="#4f6367"/>
            <Setter Property="CornerRadius" Value="6,6,0,0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="TextBox.terminal">
            <Setter Property="Background" Value="#000000"/>
            <Setter Property="Foreground" Value="#00FF00"/>
            <Setter Property="FontFamily" Value="Consolas, monospace"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        
        <Style Selector="Button.widget-button">
            <Setter Property="Height" Value="24"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Padding" Value="6,2"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="MinWidth" Value="40"/>
        </Style>
    </UserControl.Styles>
    
    <Grid>
        <!-- Minimized State - Just an icon -->
        <Grid Name="MinimizedView" IsVisible="False">
        <Border Classes="widget-container" 
                Width="60" Height="60"
                Cursor="Hand"
                PointerPressed="OnMinimizedClick">
            <Grid>
                <TextBlock Text="🔍" 
                           FontSize="24"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
                <Border Name="NotificationBadge"
                        Background="#FE5F55"
                        CornerRadius="8"
                        Width="16" Height="16"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Margin="0,-5,-5,0"
                        IsVisible="False">
                    <TextBlock Name="NotificationCount"
                               Text="0"
                               FontSize="10"
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"/>
                </Border>
            </Grid>
        </Border>
    </Grid>
    
    <!-- Expanded State - Full widget -->
    <Border Name="ExpandedView" 
            Classes="widget-container"
            Width="400" Height="500"
            IsVisible="True">
        <DockPanel>
            <!-- Header with minimize/close buttons -->
            <Border Classes="widget-header" 
                    DockPanel.Dock="Top"
                    Height="30">
                <Grid>
                    <TextBlock Name="TitleText"
                               Text="Search Widget" 
                               FontWeight="Bold"
                               FontSize="12"
                               VerticalAlignment="Center"
                               Margin="10,0"/>
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Spacing="2"
                                Margin="0,0,5,0">
                        <Button Content="_" 
                                Width="24" Height="20"
                                FontSize="16"
                                Padding="0,-5,0,0"
                                Background="Transparent"
                                Click="OnMinimizeClick"/>
                        <Button Content="□" 
                                Width="24" Height="20"
                                FontSize="14"
                                Padding="0"
                                Background="Transparent"
                                Click="OnMaximizeClick"
                                ToolTip.Tip="Maximize"/>
                        <Button Content="✕" 
                                Width="24" Height="20"
                                FontSize="12"
                                Padding="0"
                                Background="Transparent"
                                Click="OnCloseClick"/>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Content -->
            <Grid DockPanel.Dock="Top" RowDefinitions="Auto,*,Auto">
                <!-- Controls -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            Margin="5"
                            Spacing="5">
                    <Button Name="StartButton" Content="Start" 
                            Classes="oracle-btn button-color-green"
                            Height="32" FontSize="14" Padding="16,4"
                            MinWidth="80"
                            Click="OnStartClick" IsEnabled="False"/>
                    <Button Name="StopButton" Content="Stop" 
                            Classes="oracle-btn button-color-red"
                            Height="32" FontSize="14" Padding="16,4"
                            MinWidth="80"
                            Click="OnStopClick" IsEnabled="False"/>
                    <Button Name="ClearButton" Content="Clear" 
                            Classes="oracle-btn button-color-yellow-orange"
                            Height="32" FontSize="14" Padding="16,4"
                            MinWidth="80"
                            Click="OnClearClick"/>
                </StackPanel>
                
                <!-- Terminal Output -->
                <Border Grid.Row="1" Margin="5" BorderBrush="#7A9E9F" BorderThickness="1">
                    <ScrollViewer Name="TerminalScrollViewer" VerticalScrollBarVisibility="Auto">
                        <TextBox Name="TerminalOutput" 
                                 Classes="terminal" 
                                 IsReadOnly="True"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"/>
                    </ScrollViewer>
                </Border>
                
                <!-- Status Bar -->
                <Border Grid.Row="2" Background="#2a2a2a" Padding="5,2">
                    <TextBlock Name="StatusText" 
                               Text="Ready" 
                               FontSize="10"
                               Foreground="#888"/>
                </Border>
            </Grid>
        </DockPanel>
    </Border>
    </Grid>
</UserControl>