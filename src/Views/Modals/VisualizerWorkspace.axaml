<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:controls="using:BalatroSeedOracle.Controls"
             x:Class="BalatroSeedOracle.Views.Modals.VisualizerWorkspace">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel: Controls -->
        <Border Grid.Column="0"
                Background="#1a1a1a"
                BorderBrush="#333"
                BorderThickness="0,0,2,0">
            <ScrollViewer Padding="15">
                <StackPanel Spacing="20">

                    <!-- Title -->
                    <TextBlock Text="ðŸŽµ MUSIC VISUALIZER LAB"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="#FFD700"
                               HorizontalAlignment="Center"/>

                    <TextBlock Text="Create something beautiful!"
                               FontSize="12"
                               Foreground="#AAA"
                               HorizontalAlignment="Center"
                               TextWrapping="Wrap"/>

                    <!-- Quick Presets -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="QUICK MOODS"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>
                            <WrapPanel>
                                <Button Content="ðŸ˜Œ Calm" Margin="2" Click="SetCalmMood"/>
                                <Button Content="ðŸ”¥ Energy" Margin="2" Click="SetEnergyMood"/>
                                <Button Content="ðŸŒŠ Flow" Margin="2" Click="SetFlowMood"/>
                                <Button Content="ðŸ’œ Dream" Margin="2" Click="SetDreamMood"/>
                                <Button Content="âš¡ Electric" Margin="2" Click="SetElectricMood"/>
                                <Button Content="ðŸŒ¸ Soft" Margin="2" Click="SetSoftMood"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>

                    <!-- Main Color -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="MAIN COLOR"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>
                            <Slider Name="HueSlider"
                                    Minimum="0" Maximum="360"
                                    Value="180"/>
                            <TextBlock Text="{Binding ElementName=HueSlider, Path=Value, StringFormat='Hue: {0:0}Â°'}"
                                       Foreground="#AAA"/>
                        </StackPanel>
                    </Border>

                    <!-- Intensity -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="INTENSITY"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>
                            <Slider Name="IntensitySlider"
                                    Minimum="0" Maximum="2"
                                    Value="1"/>
                            <TextBlock Text="{Binding ElementName=IntensitySlider, Path=Value, StringFormat='Power: {0:0.00}x'}"
                                       Foreground="#AAA"/>
                        </StackPanel>
                    </Border>

                    <!-- Movement -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="MOVEMENT"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>

                            <TextBlock Text="Speed" Foreground="#AAA"/>
                            <Slider Name="SpeedSlider"
                                    Minimum="0" Maximum="2"
                                    Value="1"/>

                            <TextBlock Text="Twist" Foreground="#AAA"/>
                            <Slider Name="TwistSlider"
                                    Minimum="0" Maximum="1"
                                    Value="0.3"/>

                            <TextBlock Text="Zoom Pulse" Foreground="#AAA"/>
                            <Slider Name="ZoomSlider"
                                    Minimum="0" Maximum="1"
                                    Value="0.2"/>
                        </StackPanel>
                    </Border>

                    <!-- Effects -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="EFFECTS"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>

                            <CheckBox Name="ParallaxCheck"
                                      Content="Parallax Depth"
                                      IsChecked="True"/>

                            <CheckBox Name="ChromaticCheck"
                                      Content="Chromatic Aberration"/>

                            <CheckBox Name="BloomCheck"
                                      Content="Bloom Glow"
                                      IsChecked="True"/>
                        </StackPanel>
                    </Border>

                    <!-- Audio Reactivity -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <StackPanel Spacing="8">
                            <TextBlock Text="AUDIO RESPONSE"
                                       Foreground="#FFD700"
                                       FontWeight="Bold"/>

                            <TextBlock Text="Bass â†’ Movement" Foreground="#AAA"/>
                            <Slider Name="BassResponseSlider"
                                    Minimum="0" Maximum="1"
                                    Value="0.7"/>

                            <TextBlock Text="Melody â†’ Color" Foreground="#AAA"/>
                            <Slider Name="MelodyResponseSlider"
                                    Minimum="0" Maximum="1"
                                    Value="0.5"/>

                            <TextBlock Text="Drums â†’ Pulse" Foreground="#AAA"/>
                            <Slider Name="DrumsResponseSlider"
                                    Minimum="0" Maximum="1"
                                    Value="0.8"/>
                        </StackPanel>
                    </Border>

                    <!-- Save/Load -->
                    <StackPanel Spacing="8">
                        <Button Content="ðŸ’¾ Save My Vibe"
                                HorizontalAlignment="Stretch"
                                Click="SavePreset"/>
                        <Button Content="ðŸŽ² Random Vibe!"
                                HorizontalAlignment="Stretch"
                                Click="RandomizeAll"/>
                        <Button Content="ðŸ”„ Reset"
                                HorizontalAlignment="Stretch"
                                Click="ResetToDefault"/>
                    </StackPanel>

                    <!-- Encouragement -->
                    <Border Background="#2a2a2a"
                            CornerRadius="8"
                            Padding="10">
                        <TextBlock Text="You're creating something amazing! Music and visuals can heal. Keep exploring! ðŸ’œ"
                                   TextWrapping="Wrap"
                                   Foreground="#AAA"
                                   FontSize="11"
                                   TextAlignment="Center"/>
                    </Border>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Right Panel: Live Preview -->
        <Grid Grid.Column="1">
            <!-- Full shader background preview -->
            <controls:BalatroShaderBackground x:Name="ShaderPreview"/>

            <!-- Overlay info -->
            <Border VerticalAlignment="Top"
                    HorizontalAlignment="Right"
                    Margin="20"
                    Background="#AA000000"
                    CornerRadius="8"
                    Padding="15">
                <StackPanel>
                    <TextBlock Text="LIVE PREVIEW"
                               Foreground="#FFD700"
                               FontWeight="Bold"/>
                    <TextBlock Text="Changes apply instantly"
                               Foreground="#AAA"
                               FontSize="11"/>
                </StackPanel>
            </Border>

            <!-- Close button -->
            <Button Content="âœ¨ Done Creating"
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Center"
                    Margin="20"
                    Padding="20,10"
                    FontSize="16"
                    Click="CloseWorkspace"/>
        </Grid>
    </Grid>
</UserControl>