<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:avalonedit="https://github.com/avaloniaui/avaloniaedit"
             xmlns:controls="using:Oracle.Controls"
             x:Class="Oracle.Views.Modals.FiltersModalContent">
             
    <UserControl.Styles>
        <!-- Balatro Panel Style -->
        <Style Selector="Border.balatro-panel">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="BorderBrush" Value="#555a5c"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="BoxShadow" Value="inset 0 2 4 #20000000"/>
        </Style>
        
        <!-- Balatro Section Headers -->
        <Style Selector="TextBlock.section-header">
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,8,0,12"/>
        </Style>
        
        <!-- Drop Zone Base Styling - Balatro card style -->
        <Style Selector="Border.drop-zone">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="BorderBrush" Value="#666a6c"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="MinHeight" Value="140"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BoxShadow" Value="inset 0 2 6 #20000000"/>
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.2"/>
                    <BoxShadowsTransition Property="BoxShadow" Duration="0:0:0.2"/>
                </Transitions>
            </Setter>
        </Style>
        
        <!-- Drop Zone Labels -->
        <Style Selector="TextBlock.zone-label">
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        
        <!-- Drop Zone Placeholders -->
        <Style Selector="TextBlock.drop-placeholder">
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="FontStyle" Value="Italic"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="TextAlignment" Value="Center"/>
            <Setter Property="Opacity" Value="0.7"/>
        </Style>
        
        <!-- Drag Hover States */
        <Style Selector="Border.drop-zone.drag-over">
            <Setter Property="BorderBrush" Value="#FEB95F"/>
            <Setter Property="BoxShadow" Value="0 0 20 #FEB95F80, inset 0 2 6 #20000000"/>
        </Style>
        
        <Style Selector="Border.needs-zone.drag-over">
            <Setter Property="BorderBrush" Value="{StaticResource Red}"/>
            <Setter Property="BoxShadow" Value="0 0 20 #ff4c4080, inset 0 2 6 #20000000"/>
        </Style>
        
        <Style Selector="Border.wants-zone.drag-over">
            <Setter Property="BorderBrush" Value="{StaticResource Blue}"/>
            <Setter Property="BoxShadow" Value="0 0 20 #0093ff80, inset 0 2 6 #20000000"/>
        </Style>
        
        <Style Selector="Border.mustnot-zone.drag-over">
            <Setter Property="BorderBrush" Value="{StaticResource Orange}"/>
            <Setter Property="BoxShadow" Value="0 0 20 #ff980080, inset 0 2 6 #20000000"/>
        </Style>
        
        <!-- Draggable Item Styling - Balatro card style -->
        <Style Selector="Border.draggable-item">
            <Setter Property="Background" Value="#4f6367"/>
            <Setter Property="BorderBrush" Value="#7A9E9F"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Transitions">
                <Transitions>
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.15"/>
                    <DoubleTransition Property="Opacity" Duration="0:0:0.15"/>
                    <BrushTransition Property="BorderBrush" Duration="0:0:0.15"/>
                </Transitions>
            </Setter>
        </Style>
        
        <Style Selector="Border.draggable-item:pointerover">
            <Setter Property="BorderBrush" Value="#FEB95F"/>
            <Setter Property="RenderTransform" Value="translateY(-2px)"/>
        </Style>
        
        <Style Selector="Border.draggable-item.is-dragging">
            <Setter Property="Opacity" Value="0.6"/>
        </Style>
        
        <!-- Item Text Style -->
        <Style Selector="TextBlock.item-text">
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="TextAlignment" Value="Center"/>
        </Style>
        
        <!-- Navigation buttons - Balatro red style -->
        <Style Selector="Button.nav-button">
            <Setter Property="Background" Value="{StaticResource Red}"/>
            <Setter Property="BorderBrush" Value="#8b1538"/>
            <Setter Property="BorderThickness" Value="3"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="MinHeight" Value="36"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.nav-button:pointerover">
            <Setter Property="Background" Value="{StaticResource RedHover}"/>
        </Style>
        
        <Style Selector="Button.nav-button:pressed">
            <Setter Property="Background" Value="#a01c42"/>
        </Style>
        
        <!-- Clear buttons -->
        <Style Selector="Button.clear-zone-button">
            <Setter Property="Background" Value="{StaticResource Red}"/>
            <Setter Property="BorderBrush" Value="#8b1538"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width" Value="20"/>
            <Setter Property="Height" Value="20"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Opacity" Value="0.8"/>
        </Style>
        
        <Style Selector="Button.clear-zone-button:pointerover">
            <Setter Property="Opacity" Value="1"/>
            <Setter Property="Background" Value="{StaticResource RedHover}"/>
        </Style>
        
        <!-- Search box styling -->
        <Style Selector="TextBox.search-box">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="BorderBrush" Value="#666a6c"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Foreground" Value="#E2E2E3"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="CaretBrush" Value="#E2E2E3"/>
            <Setter Property="SelectionBrush" Value="{StaticResource Blue}"/>
        </Style>
        
        <Style Selector="TextBox.search-box:focus">
            <Setter Property="BorderBrush" Value="{StaticResource Blue}"/>
        </Style>
        
        <!-- File name input -->
        <Style Selector="TextBox.filename-input">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="BorderBrush" Value="#666a6c"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Foreground" Value="#E2E2E3"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="CaretBrush" Value="#E2E2E3"/>
            <Setter Property="SelectionBrush" Value="{StaticResource Blue}"/>
        </Style>
        
        <Style Selector="TextBox.filename-input:focus">
            <Setter Property="BorderBrush" Value="{StaticResource Blue}"/>
        </Style>
        
        <!-- JSON Editor styling */
        <Style Selector="avalonedit|TextEditor">
            <Setter Property="Background" Value="#2d2d2d"/>
            <Setter Property="Foreground" Value="#E2E2E3"/>
            <Setter Property="FontFamily" Value="Cascadia Code, Consolas, monospace"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="LineNumbersForeground" Value="#888888"/>
        </Style>
    </UserControl.Styles>
    
    <!-- Main Layout - Proper Balatro styling -->
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- Top Control Bar - Balatro style -->
        <Border Grid.Row="0" Classes="balatro-panel" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Mode Toggle Buttons -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="6">
                    <Button Name="VisualModeButton" 
                            Classes="btn-blue"
                            Content="Visual" 
                            FontSize="14" 
                            MinHeight="40" 
                            MinWidth="80"
                            FontFamily="{StaticResource BalatroFont}"
                            FontWeight="Bold"/>
                    <Button Name="JsonModeButton" 
                            Classes="btn-red"
                            Content="Json" 
                            FontSize="14" 
                            MinHeight="40" 
                            MinWidth="80"
                            FontFamily="{StaticResource BalatroFont}"
                            FontWeight="Bold"/>
                </StackPanel>
                
                <!-- Browse Button -->
                <Button Grid.Column="2" 
                        Name="BrowseButton"
                        Classes="btn-orange"
                        Content="Browse..."
                        FontSize="16"
                        MinHeight="40"
                        MinWidth="120"
                        FontFamily="{StaticResource BalatroFont}"
                        FontWeight="Bold"/>
                
                <!-- File Name Input -->
                <TextBox Grid.Column="4"
                        Name="ConfigNameBox" 
                        Classes="filename-input"
                        Watermark="Enter filter name..." 
                        Height="40"/>
                
                <!-- Save Button -->
                <Button Grid.Column="6" 
                        Name="SaveButton"
                        Classes="btn-blue"
                        Content="SAVE"
                        FontSize="16"
                        MinHeight="40"
                        MinWidth="100"
                        FontFamily="{StaticResource BalatroFont}"
                        FontWeight="Bold"/>
                
                <!-- Go to Search Button -->
                <Button Grid.Column="8" 
                        Name="CreateWidgetButton"
                        Classes="btn-green"
                        Content="GO TO SEARCH"
                        FontSize="16"
                        MinHeight="40"
                        MinWidth="180"
                        FontFamily="{StaticResource BalatroFont}"
                        FontWeight="Bold"
                        ToolTip.Tip="Create a search widget on desktop with this filter"/>
            </Grid>
        </Border>
        
        <!-- Main Content Area -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="140"/>
                <ColumnDefinition Width="15"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Navigation Sidebar - Balatro style -->
            <Border Grid.Column="0" Classes="balatro-panel" Padding="12">
                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
                    <StackPanel Spacing="4">
                        <Button Name="FavoritesTab" Content="FAVORITES" Classes="nav-button"/>
                        <Button Name="SoulJokersTab" Content="LEGENDARY" Classes="nav-button"/>
                        <Button Name="RareJokersTab" Content="RARE" Classes="nav-button"/>
                        <Button Name="UncommonJokersTab" Content="UNCOMMON" Classes="nav-button"/>
                        <Button Name="CommonJokersTab" Content="COMMON" Classes="nav-button"/>
                        <Button Name="VouchersTab" Content="VOUCHERS" Classes="nav-button"/>
                        <Button Name="TarotsTab" Content="TAROTS" Classes="nav-button"/>
                        <Button Name="SpectralsTab" Content="SPECTRALS" Classes="nav-button"/>
                        <Button Name="TagsTab" Content="TAGS" Classes="nav-button"/>
                        <Button Name="BossesTab" Content="BOSSES" Classes="nav-button"/>
                        <Button Name="ClearTab" Content="CLEAR ALL" Classes="nav-button"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            
            <!-- Main Content Area -->
            <Grid Grid.Column="2" Name="MainContentGrid">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- LEFT: Item Palette -->
                <Border Grid.Column="0" Classes="balatro-panel" Padding="12">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="12"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Section Header -->
                        <TextBlock Grid.Row="0" Classes="section-header" Text="Legendary"/>
                        
                        <!-- Search Bar -->
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="8"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBox Grid.Column="0" 
                                    Name="SearchBox" 
                                    Classes="search-box"
                                    Watermark="Search items..." 
                                    Height="32"/>
                            <Button Grid.Column="2" 
                                    Name="ClearSearchButton" 
                                    Content="✕" 
                                    Classes="btn-red"
                                    Width="32" 
                                    Height="32" 
                                    FontSize="12" 
                                    Padding="0"/>
                        </Grid>
                        
                        <!-- Item Palette Content -->
                        <ContentControl Grid.Row="3" 
                                        Name="ItemPaletteContent" 
                                        Background="Transparent"/>
                    </Grid>
                </Border>
                
                <!-- RIGHT: Drop Zones -->
                <Grid Grid.Column="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="12"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="12"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- MUST (NEEDS) Panel -->
                    <Border Grid.Row="0" 
                            Name="NeedsBorder" 
                            Classes="drop-zone needs-zone">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Header with clear button -->
                            <Grid Grid.Row="0">
                                <TextBlock Classes="zone-label" 
                                          Text="MUST" 
                                          Foreground="{StaticResource Red}"/>
                                <Button Name="ClearNeedsButton" 
                                        Classes="clear-zone-button"
                                        Content="✕"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Margin="0,-6,-6,0"
                                        IsVisible="False"/>
                            </Grid>
                            
                            <!-- Drop Area -->
                            <Grid Grid.Row="1">
                                <TextBlock Name="NeedsPlaceholder" 
                                          Classes="drop-placeholder" 
                                          Text="Drop required items here"
                                          IsVisible="True"/>
                                <ScrollViewer Name="NeedsScrollViewer" 
                                            VerticalScrollBarVisibility="Auto" 
                                            HorizontalScrollBarVisibility="Disabled" 
                                            IsVisible="False">
                                    <WrapPanel Name="NeedsPanel" Orientation="Horizontal"/>
                                </ScrollViewer>
                            </Grid>
                        </Grid>
                    </Border>
                    
                    <!-- SHOULD (WANTS) Panel -->
                    <Border Grid.Row="2" 
                            Name="WantsBorder" 
                            Classes="drop-zone wants-zone">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Header with clear button -->
                            <Grid Grid.Row="0">
                                <TextBlock Classes="zone-label" 
                                          Text="WANTS" 
                                          Foreground="{StaticResource Blue}"/>
                                <Button Name="ClearWantsButton" 
                                        Classes="clear-zone-button"
                                        Content="✕"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Margin="0,-6,-6,0"
                                        IsVisible="False"/>
                            </Grid>
                            
                            <!-- Drop Area -->
                            <Grid Grid.Row="1">
                                <TextBlock Name="WantsPlaceholder" 
                                          Classes="drop-placeholder" 
                                          Text="Drop preferred items here"
                                          IsVisible="True"/>
                                <ScrollViewer Name="WantsScrollViewer" 
                                            VerticalScrollBarVisibility="Auto" 
                                            HorizontalScrollBarVisibility="Disabled" 
                                            IsVisible="False">
                                    <WrapPanel Name="WantsPanel" Orientation="Horizontal"/>
                                </ScrollViewer>
                            </Grid>
                        </Grid>
                    </Border>
                    
                    <!-- MUST NOT Panel -->
                    <Border Grid.Row="4" 
                            Name="MustNotBorder" 
                            Classes="drop-zone mustnot-zone">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Header with clear button -->
                            <Grid Grid.Row="0">
                                <TextBlock Classes="zone-label" 
                                          Text="FORBIDDEN" 
                                          Foreground="{StaticResource Orange}"/>
                                <Button Name="ClearMustNotButton" 
                                        Classes="clear-zone-button"
                                        Content="✕"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Margin="0,-6,-6,0"
                                        IsVisible="False"/>
                            </Grid>
                            
                            <!-- Drop Area -->
                            <Grid Grid.Row="1">
                                <TextBlock Name="MustNotPlaceholder" 
                                          Classes="drop-placeholder" 
                                          Text="Drop forbidden items here"
                                          IsVisible="True"/>
                                <ScrollViewer Name="MustNotScrollViewer" 
                                            VerticalScrollBarVisibility="Auto" 
                                            HorizontalScrollBarVisibility="Disabled" 
                                            IsVisible="False">
                                    <WrapPanel Name="MustNotPanel" Orientation="Horizontal"/>
                                </ScrollViewer>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
                
                <!-- JSON Mode Content (Hidden by default) -->
                <Border Grid.Column="0" 
                        Grid.ColumnSpan="3"
                        Name="JsonModeContainer" 
                        Classes="balatro-panel"
                        Padding="15"
                        IsVisible="False">
                    <ContentControl Name="JsonModeContent"/>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</UserControl>