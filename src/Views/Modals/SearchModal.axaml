<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Oracle.Views.Modals.SearchModal">
    
    <UserControl.Styles>
        <Style Selector="DataGrid">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="BorderBrush" Value="#7A9E9F"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="GridLinesVisibility" Value="All"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="RowBackground" Value="#374244"/>
            <Setter Property="HorizontalGridLinesBrush" Value="#4A5F61"/>
            <Setter Property="VerticalGridLinesBrush" Value="#4A5F61"/>
        </Style>
        
        <Style Selector="DataGridColumnHeader">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="#FEB95F"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="#4A5F61"/>
            <Setter Property="BorderThickness" Value="0,0,1,1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>
        
        <Style Selector="DataGridRow">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="Height" Value="35"/>
        </Style>
        
        <Style Selector="DataGridRow:nth-child(2n)">
            <Setter Property="Background" Value="#2f3e40"/>
        </Style>
        
        <Style Selector="DataGridRow:selected">
            <Setter Property="Background" Value="#5a7a7c"/>
        </Style>
        
        <Style Selector="DataGridRow:pointerover">
            <Setter Property="Background" Value="#4a6a6c"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="DataGridCell">
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        
        <Style Selector="Button.copy-button">
            <Setter Property="Background" Value="#4A90E2"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Padding" Value="6,2"/>
            <Setter Property="MinWidth" Value="50"/>
        </Style>
        
        <Style Selector="Button.copy-button:pointerover">
            <Setter Property="Background" Value="#5BA0F2"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </UserControl.Styles>
    
    <!-- This is just the content, StandardModal will wrap it -->
    <Grid RowDefinitions="Auto,Auto,*,Auto">
        <!-- Control Bar - Similar to widget -->
        <Border Grid.Row="0" 
                Background="#374244" 
                BorderBrush="#7A9E9F"
                BorderThickness="1"
                CornerRadius="8"
                Padding="10"
                Margin="0,0,0,10">
            <Grid RowDefinitions="Auto,Auto">
                <!-- Config and status -->
                <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto">
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Spacing="10">
                        <TextBlock Text="Config:" FontWeight="Bold" VerticalAlignment="Center"/>
                        <TextBlock Name="ConfigPathTextBox" 
                                   Text="No config loaded"
                                   VerticalAlignment="Center"
                                   Foreground="#FEB95F"/>
                    </StackPanel>
                    <TextBlock Grid.Column="1" Name="StatusText" 
                               Text="Ready"
                               Foreground="#888"
                               VerticalAlignment="Center"
                               Margin="0,0,20,0"/>
                    <StackPanel Grid.Column="2" Orientation="Horizontal" Spacing="5">
                        <Button Name="MinimizeButton"
                                Content="â–¼"
                                Classes="btn-red"
                                Width="30"
                                Height="30"
                                FontSize="12"
                                Padding="0"
                                ToolTip.Tip="Back to widget"
                                Click="OnMinimizeClick"/>
                    </StackPanel>
                </Grid>
                
                <!-- Live search info -->
                <Grid Grid.Row="1" ColumnDefinitions="*,*,*" Margin="0,10,0,0">
                    <TextBlock Grid.Column="0" Name="SeedsSearchedText" 
                               Text="Seeds: 0"
                               FontSize="12"/>
                    <TextBlock Grid.Column="1" Name="FoundCountText" 
                               Text="Found: 0"
                               FontSize="12"
                               HorizontalAlignment="Center"/>
                    <TextBlock Grid.Column="2" Name="SpeedText" 
                               Text="Speed: 0/s"
                               FontSize="12"
                               HorizontalAlignment="Right"/>
                </Grid>
            </Grid>
        </Border>
        
        <!-- Search Configuration and Action buttons -->
        <Border Grid.Row="1" 
                Background="#374244" 
                BorderBrush="#7A9E9F"
                BorderThickness="1"
                CornerRadius="8"
                Padding="15"
                Margin="0,0,0,10">
            <Grid RowDefinitions="Auto,Auto,Auto">
                <!-- Search Configuration -->
                <Grid Grid.Row="0" ColumnDefinitions="*,*,*" Margin="0,0,0,15">
                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock Text="Search Parameters" FontWeight="Bold" FontSize="14" Foreground="#FEB95F"/>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Threads:" VerticalAlignment="Center" Width="60"/>
                            <NumericUpDown Name="ThreadsUpDown" 
                                           Value="4" 
                                           Minimum="1" 
                                           Maximum="32" 
                                           Width="80"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Batch Size:" VerticalAlignment="Center" Width="60"/>
                            <NumericUpDown Name="BatchSizeUpDown" 
                                           Value="4" 
                                           Minimum="2" 
                                           Maximum="4" 
                                           Width="80"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Spacing="8">
                        <TextBlock Text="Search Range" FontWeight="Bold" FontSize="14" Foreground="#FEB95F"/>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Start:" VerticalAlignment="Center" Width="60"/>
                            <NumericUpDown Name="StartBatchUpDown" 
                                           Value="0" 
                                           Minimum="0" 
                                           Maximum="999999" 
                                           Width="80"/>
                        </StackPanel>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="End:" VerticalAlignment="Center" Width="60"/>
                            <NumericUpDown Name="EndBatchUpDown" 
                                           Value="1000" 
                                           Minimum="1" 
                                           Maximum="999999" 
                                           Width="80"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="2" Spacing="8">
                        <TextBlock Text="Options" FontWeight="Bold" FontSize="14" Foreground="#FEB95F"/>
                        
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Score Min:" VerticalAlignment="Center" Width="70"/>
                            <NumericUpDown Name="CutoffUpDown" 
                                           Value="0" 
                                           Minimum="0" 
                                           Maximum="10000" 
                                           Width="80"/>
                        </StackPanel>
                        
                        <CheckBox Name="DebugCheckBox" 
                                  Content="Debug Output" 
                                  Margin="0,4"/>
                    </StackPanel>
                </Grid>
                
                <!-- Specific Search -->
                <Grid Grid.Row="1" ColumnDefinitions="*,*" Margin="0,0,0,15">
                    <StackPanel Grid.Column="0" Spacing="8">
                        <TextBlock Text="Specific Seed:" VerticalAlignment="Center"/>
                        <TextBox Name="SpecificSeedTextBox" 
                                 Watermark="Enter 8-character seed (optional)"
                                 MaxLength="8"
                                 Width="200"
                                 HorizontalAlignment="Left"/>
                    </StackPanel>
                    
                    <StackPanel Grid.Column="1" Spacing="8">
                        <TextBlock Text="Keyword Search:" VerticalAlignment="Center"/>
                        <TextBox Name="KeywordTextBox" 
                                 Watermark="Generate seeds from keyword"
                                 Width="200"
                                 HorizontalAlignment="Left"/>
                    </StackPanel>
                </Grid>
                
                <!-- Action Buttons -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="15">
                    <Button Name="StartButton"
                            Content="Start Search"
                            Classes="btn-green"
                            Height="36"
                            FontSize="14"
                            Padding="20,6"
                            MinWidth="120"
                            IsEnabled="False"
                            Click="OnStartClick"/>
                    <Button Name="StopButton"
                            Content="Stop Search"
                            Classes="btn-red"
                            Height="36"
                            FontSize="14"
                            Padding="20,6"
                            MinWidth="120"
                            IsEnabled="False"
                            Click="OnStopClick"/>
                    <Button Name="ExportButton"
                            Content="Export Results"
                            Classes="btn-blue"
                            Height="36"
                            FontSize="14"
                            Padding="20,6"
                            MinWidth="120"
                            IsEnabled="False"
                            Click="OnExportClick"/>
                    <Button Name="ClearButton"
                            Content="Clear Results"
                            Classes="btn-orange"
                            Height="36"
                            FontSize="14"
                            Padding="20,6"
                            MinWidth="120"
                            Click="OnClearClick"/>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Results Table -->
        <Border Grid.Row="2" 
                Background="#2a2a2a" 
                CornerRadius="8"
                Padding="10">
            <Grid>
                <TextBlock Name="NoResultsText"
                           Text="No seeds found yet. Start a search from the widget."
                           FontSize="14"
                           Foreground="#888"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           IsVisible="True"/>
                
                <DataGrid Name="ResultsGrid"
                          ItemsSource="{Binding}"
                          AutoGenerateColumns="False"
                          CanUserResizeColumns="True"
                          CanUserSortColumns="True"
                          CanUserReorderColumns="True"
                          IsReadOnly="True"
                          SelectionMode="Extended"
                          GridLinesVisibility="All"
                          IsVisible="False"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="#" 
                                            Binding="{Binding Index}" 
                                            Width="50"
                                            CanUserSort="False"/>
                        <DataGridTextColumn Header="Seed" 
                                            Binding="{Binding Seed}" 
                                            Width="120"
                                            FontFamily="Consolas, monospace"/>
                        <DataGridTextColumn Header="Score" 
                                            Binding="{Binding ScoreFormatted}" 
                                            Width="100"
                                            SortMemberPath="Score"/>
                        <DataGridTextColumn Header="Details" 
                                            Binding="{Binding Details}" 
                                            Width="*"/>
                        <DataGridTemplateColumn Header="Actions" Width="120" CanUserSort="False">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="5">
                                        <Button Content="Copy"
                                                Classes="copy-button"
                                                Command="{Binding CopyCommand}"
                                                CommandParameter="{Binding Seed}"
                                                ToolTip.Tip="Copy seed to clipboard"/>
                                        <Button Content="View"
                                                Classes="copy-button"
                                                Command="{Binding ViewCommand}"
                                                CommandParameter="{Binding}"
                                                ToolTip.Tip="View detailed info"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
        
        <!-- Summary -->
        <TextBlock Grid.Row="3" 
                   Name="SummaryText"
                   Text="0 seeds found"
                   FontSize="12"
                   Foreground="#888"
                   HorizontalAlignment="Center"
                   Margin="0,10,0,0"/>
    </Grid>
</UserControl>