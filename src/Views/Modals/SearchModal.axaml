<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Oracle.Views.Modals.SearchModal">
    
    <UserControl.Styles>
        <!-- Balatro-style tab buttons matching the New Run screen -->
        <Style Selector="Button.tab-button">
            <Setter Property="Background" Value="#4f6367"/>
            <Setter Property="Foreground" Value="#888888"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="MinWidth" Value="140"/>
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style Selector="Button.tab-button:pointerover">
            <Setter Property="Background" Value="#5a6a6e"/>
        </Style>
        <Style Selector="Button.tab-button.active">
            <Setter Property="Background" Value="#ff4c40"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
        
        <!-- Arrow buttons like in deck selection -->
        <Style Selector="Button.arrow-button">
            <Setter Property="Background" Value="#ff4c40"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="32"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Width" Value="60"/>
            <Setter Property="Height" Value="180"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.arrow-button:pointerover">
            <Setter Property="Background" Value="#a02721"/>
        </Style>
        
        <!-- Main content box style -->
        <Style Selector="Border.content-box">
            <Setter Property="Background" Value="#2e3f42"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="BorderBrush" Value="#4f6367"/>
            <Setter Property="BorderThickness" Value="2"/>
        </Style>
        
        <!-- Input field style matching Balatro -->
        <Style Selector="TextBox.seed-input">
            <Setter Property="Background" Value="#374244"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="BorderBrush" Value="#4f6367"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="CornerRadius" Value="6"/>
        </Style>
        
        <!-- Small button style (like Paste Seed) -->
        <Style Selector="Button.small-button">
            <Setter Property="Background" Value="#0093ff"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Padding" Value="16,0"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.small-button:pointerover">
            <Setter Property="Background" Value="#0057a1"/>
        </Style>
        
        <!-- Big PLAY button style -->
        <Style Selector="Button.play-button">
            <Setter Property="Background" Value="#0093ff"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="36"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Height" Value="64"/>
            <Setter Property="MinWidth" Value="280"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style Selector="Button.play-button:pointerover">
            <Setter Property="Background" Value="#0057a1"/>
        </Style>
        <Style Selector="Button.play-button:disabled">
            <Setter Property="Background" Value="#4f6367"/>
            <Setter Property="Foreground" Value="#888888"/>
        </Style>
        
        <!-- Terminal style for console -->
        <Style Selector="TextBox.terminal">
            <Setter Property="Background" Value="#0a0a0a"/>
            <Setter Property="Foreground" Value="#00ff00"/>
            <Setter Property="FontFamily" Value="Cascadia Code, Consolas, monospace"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
    </UserControl.Styles>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Tabs -->
            <RowDefinition Height="*"/>    <!-- Content -->
        </Grid.RowDefinitions>
        
        <!-- Tab buttons at top -->
        <StackPanel Grid.Row="0" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center"
                    Margin="0,0,0,16">
            <Button Name="SearchTab" 
                    Content="New Search" 
                    Classes="tab-button active"
                    Click="OnTabClick"/>
            <Button Name="ConsoleTab" 
                    Content="Console" 
                    Classes="tab-button"
                    Click="OnTabClick"/>
            <Button Name="ResultsTab" 
                    Content="Results" 
                    Classes="tab-button"
                    Click="OnTabClick"/>
        </StackPanel>
        
        <!-- Content area -->
        <Grid Grid.Row="1" Margin="24">
            <!-- Search Panel (like New Run) -->
            <StackPanel Name="SearchPanel" IsVisible="True" Spacing="24">
                <!-- Filter Selection Box -->
                <Border Classes="content-box" HorizontalAlignment="Center">
                    <Grid ColumnDefinitions="Auto,*,Auto">
                        <Button Grid.Column="0" 
                                Content="&lt;" 
                                Classes="arrow-button"
                                Width="48"
                                Height="120"
                                Margin="0,0,16,0"
                                IsEnabled="False"/>
                        
                        <StackPanel Grid.Column="1" Spacing="16" MinWidth="400">
                            <TextBlock Text="FILTER CONFIG" 
                                       FontSize="24" 
                                       FontWeight="Bold" 
                                       Foreground="#FEB95F"
                                       HorizontalAlignment="Center"/>
                            
                            <Grid RowDefinitions="Auto,Auto" RowSpacing="12">
                                <Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="8">
                                    <TextBox Grid.Column="0"
                                             Name="FilterPathInput"
                                             Classes="seed-input"
                                             IsReadOnly="True"
                                             Watermark="No filter loaded"/>
                                    <Button Grid.Column="1"
                                            Content="Browse"
                                            Classes="small-button"
                                            Click="OnBrowseFilterClick"/>
                                </Grid>
                                
                                <TextBlock Grid.Row="1"
                                           Name="FilterDescription"
                                           Text="Select a filter configuration to begin"
                                           Foreground="#888888"
                                           HorizontalAlignment="Center"/>
                            </Grid>
                        </StackPanel>
                        
                        <Button Grid.Column="2" 
                                Content="&gt;" 
                                Classes="arrow-button"
                                Width="48"
                                Height="120"
                                Margin="16,0,0,0"
                                IsEnabled="False"/>
                    </Grid>
                </Border>
                
                <!-- Search Settings -->
                <Border Classes="content-box" HorizontalAlignment="Center" MinWidth="600">
                    <StackPanel Spacing="20">
                        <TextBlock Text="Search Settings" 
                                   FontSize="20" 
                                   FontWeight="Bold" 
                                   Foreground="#FEB95F"
                                   HorizontalAlignment="Center"/>
                        
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="24">
                            <!-- Left column -->
                            <StackPanel Grid.Column="0" Spacing="12">
                                <Grid ColumnDefinitions="140,*" ColumnSpacing="12">
                                    <TextBlock Grid.Column="0" Text="Threads:" VerticalAlignment="Center" Foreground="White"/>
                                    <NumericUpDown Grid.Column="1" 
                                                   Name="ThreadsUpDown" 
                                                   Value="4" 
                                                   Minimum="1" 
                                                   Maximum="32"
                                                   Height="32"/>
                                </Grid>
                                
                                <Grid ColumnDefinitions="140,*" ColumnSpacing="12">
                                    <TextBlock Grid.Column="0" Text="Min Score:" VerticalAlignment="Center" Foreground="White"/>
                                    <NumericUpDown Grid.Column="1" 
                                                   Name="CutoffUpDown" 
                                                   Value="0" 
                                                   Minimum="0" 
                                                   Maximum="10000"
                                                   Height="32"/>
                                </Grid>
                            </StackPanel>
                            
                            <!-- Right column -->
                            <StackPanel Grid.Column="1" Spacing="12">
                                <Grid ColumnDefinitions="140,*" ColumnSpacing="12">
                                    <TextBlock Grid.Column="0" Text="Batch Size:" VerticalAlignment="Center" Foreground="White"/>
                                    <NumericUpDown Grid.Column="1" 
                                                   Name="BatchSizeUpDown" 
                                                   Value="4" 
                                                   Minimum="2" 
                                                   Maximum="4"
                                                   Height="32"/>
                                </Grid>
                                
                                <CheckBox Name="DebugCheckBox" 
                                          Content="Enable Debug Output"
                                          Foreground="White"
                                          Margin="0,4"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>
                
                <!-- Live Stats -->
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            Spacing="24"
                            Name="StatsPanel"
                            IsVisible="False">
                    <Border Classes="content-box" Padding="16,8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Seeds:" Foreground="#888888"/>
                            <TextBlock Name="SeedsSearchedText" Text="0" FontWeight="Bold" Foreground="#429f79"/>
                        </StackPanel>
                    </Border>
                    <Border Classes="content-box" Padding="16,8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Found:" Foreground="#888888"/>
                            <TextBlock Name="FoundCountText" Text="0" FontWeight="Bold" Foreground="#429f79"/>
                        </StackPanel>
                    </Border>
                    <Border Classes="content-box" Padding="16,8">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Speed:" Foreground="#888888"/>
                            <TextBlock Name="SpeedText" Text="0/s" FontWeight="Bold" Foreground="#ff9800"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- PLAY/STOP button -->
                <Button Name="PlayButton"
                        Content="SEARCH"
                        Classes="play-button"
                        HorizontalAlignment="Center"
                        IsEnabled="False"
                        Click="OnPlayClick"/>
            </StackPanel>
            
            <!-- Console Panel -->
            <Grid Name="ConsolePanel" IsVisible="False" RowDefinitions="*,Auto">
                <ScrollViewer Grid.Row="0" 
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto">
                    <TextBox Name="ConsoleOutput" 
                             Classes="terminal" 
                             IsReadOnly="True"
                             AcceptsReturn="True"
                             TextWrapping="NoWrap"
                             Text="> Motely Search Console&#x0a;> Ready for commands...&#x0a;"/>
                </ScrollViewer>
                <Button Grid.Row="1"
                        Content="Clear Console"
                        HorizontalAlignment="Right"
                        Margin="0,8,0,0"
                        Classes="small-button"
                        Click="OnClearConsoleClick"/>
            </Grid>
            
            <!-- Results Panel -->
            <Grid Name="ResultsPanel" IsVisible="False">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl Name="ResultsList" Margin="0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Classes="content-box" 
                                        Margin="0,4">
                                    <Grid ColumnDefinitions="Auto,*,Auto">
                                        <TextBlock Grid.Column="0" 
                                                   Text="{Binding Seed}" 
                                                   FontFamily="Cascadia Code, Consolas, monospace"
                                                   FontWeight="Bold"
                                                   FontSize="20"
                                                   Foreground="#429f79"
                                                   VerticalAlignment="Center"/>
                                        <TextBlock Grid.Column="1" 
                                                   Text="{Binding Details}" 
                                                   Margin="16,0"
                                                   VerticalAlignment="Center"
                                                   Foreground="#CCCCCC"/>
                                        <StackPanel Grid.Column="2" 
                                                    Orientation="Horizontal" 
                                                    Spacing="12">
                                            <Border Background="#ff9800"
                                                    CornerRadius="6"
                                                    Padding="12,4">
                                                <TextBlock Text="{Binding Score}" 
                                                           FontWeight="Bold"
                                                           Foreground="White"/>
                                            </Border>
                                            <Button Content="Copy"
                                                    Classes="small-button"
                                                    Command="{Binding CopyCommand}"
                                                    CommandParameter="{Binding Seed}"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</UserControl>