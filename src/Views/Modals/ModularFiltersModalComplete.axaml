<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:tabs="using:BalatroSeedOracle.Components.FilterTabs"
             xmlns:vm="using:BalatroSeedOracle.ViewModels"
             x:Class="BalatroSeedOracle.Views.Modals.ModularFiltersModalComplete"
             x:DataType="vm:FiltersModalViewModel">

    <UserControl.Styles>
        <!-- Tab button styles -->
        <Style Selector="Button.tab-button">
            <Setter Property="Background" Value="{StaticResource Red}"/>
            <Setter Property="Foreground" Value="{StaticResource White}"/>
            <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="MinHeight" Value="50"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Margin" Value="4,0,4,4"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style Selector="Button.tab-button:pointerover">
            <Setter Property="Background" Value="{StaticResource RedHover}"/>
        </Style>
        
        <Style Selector="Button.tab-button.active">
            <Setter Property="Background" Value="{StaticResource Gold}"/>
            <Setter Property="Foreground" Value="{StaticResource Black}"/>
        </Style>
    </UserControl.Styles>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Tab Navigation -->
            <RowDefinition Height="15"/>    <!-- Spacer -->
            <RowDefinition Height="*"/>     <!-- Tab Content -->
        </Grid.RowDefinitions>
        
        <!-- Tab Navigation -->
        <Border Grid.Row="0"
                Background="{StaticResource DarkModalGrey}"
                BorderThickness="0"
                CornerRadius="8"
                Padding="15">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Center" 
                        Spacing="10">
                
                <!-- Visual Builder Tab -->
                <Button Content="ðŸŽ¨ VISUAL" 
                        Classes="tab-button"
                        Classes.active="{Binding IsVisualTabActive}"
                        Command="{Binding SwitchTabCommand}"
                        CommandParameter="Visual"/>
                
                <!-- JSON Editor Tab -->
                <Button Content="ðŸ“ JSON" 
                        Classes="tab-button"
                        Classes.active="{Binding IsJsonTabActive}"
                        Command="{Binding SwitchTabCommand}"
                        CommandParameter="Json"/>
                
                <!-- Save Tab -->
                <Button Content="ðŸ’¾ SAVE" 
                        Classes="tab-button"
                        Classes.active="{Binding IsSaveTabActive}"
                        Command="{Binding SwitchTabCommand}"
                        CommandParameter="Save"/>
                
                <!-- Load Tab -->
                <Button Content="ðŸ“‚ LOAD" 
                        Classes="tab-button"
                        Classes.active="{Binding IsLoadTabActive}"
                        Command="{Binding SwitchTabCommand}"
                        CommandParameter="Load"/>
                
                <!-- Test Filter Button (always visible) -->
                <Button Content="ðŸ§ª TEST" 
                        Classes="btn-green"
                        Command="{Binding TestFilterCommand}"
                        Width="100"
                        Height="50"
                        FontSize="14"
                        Margin="20,0,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Tab Content Area -->
        <Border Grid.Row="2"
                Background="{StaticResource DarkModalGrey}"
                BorderThickness="0"
                CornerRadius="8"
                Padding="15">
            <Grid>
                <!-- Visual Builder Tab Content -->
                <tabs:VisualBuilderTab IsVisible="{Binding IsVisualTabActive}"/>
                
                <!-- JSON Editor Tab Content -->
                <tabs:JsonEditorTab IsVisible="{Binding IsJsonTabActive}"/>
                
                <!-- Save Filter Tab Content -->
                <tabs:SaveFilterTab IsVisible="{Binding IsSaveTabActive}"/>
                
                <!-- Load Filter Tab Content (placeholder) -->
                <Border IsVisible="{Binding IsLoadTabActive}"
                        Background="{StaticResource ContainerDarkPrecise}"
                        CornerRadius="8"
                        Padding="30">
                    <StackPanel Spacing="20" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="ðŸ“‚ LOAD FILTER" 
                                   FontSize="28" 
                                   Foreground="{StaticResource Gold}"
                                   FontFamily="{StaticResource BalatroFont}"
                                   HorizontalAlignment="Center"/>
                        
                        <TextBlock Text="Browse and load existing filters..." 
                                   FontSize="16" 
                                   Foreground="{StaticResource TextLight}"
                                   FontFamily="{StaticResource BalatroFont}"
                                   HorizontalAlignment="Center"/>
                        
                        <Button Content="BROWSE FILTERS"
                                Command="{Binding LoadCommand}"
                                Classes="btn-blue"
                                Width="200"
                                Height="50"
                                FontSize="16"/>
                        
                        <!-- Filter Test Results Area -->
                        <Border Background="{StaticResource ContainerDarkPrecise}"
                                BorderThickness="2"
                                BorderBrush="{StaticResource ModalBorder}"
                                CornerRadius="8"
                                Padding="20"
                                MinWidth="300"
                                MinHeight="150">
                            <StackPanel Spacing="15">
                                <TextBlock Text="FILTER STATUS" 
                                           FontSize="16" 
                                           Foreground="{StaticResource Gold}"
                                           FontFamily="{StaticResource BalatroFont}"
                                           HorizontalAlignment="Center"/>
                                
                                <TextBlock Text="Ready to test filter..." 
                                           FontSize="14" 
                                           Foreground="{StaticResource TextLight}"
                                           FontFamily="{StaticResource BalatroFont}"
                                           HorizontalAlignment="Center"
                                           TextWrapping="Wrap"/>
                                
                                <!-- Placeholder for test results -->
                                <Border Background="{StaticResource ContainerDarkPrecise}"
                                        CornerRadius="50"
                                        Width="60"
                                        Height="60"
                                        HorizontalAlignment="Center">
                                    <TextBlock Text="?"
                                               FontSize="30"
                                               Foreground="{StaticResource TextLight}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
    </Grid>
</UserControl>