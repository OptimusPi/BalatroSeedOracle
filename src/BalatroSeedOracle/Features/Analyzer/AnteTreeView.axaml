<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:BalatroSeedOracle.ViewModels"
             xmlns:controls="using:BalatroSeedOracle.Controls"
             x:Class="BalatroSeedOracle.Features.Analyzer.AnteTreeView"
             x:DataType="vm:AnalyzerViewModel">
    
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Spacing="12" Margin="16">
            <!-- Header -->
            <TextBlock Text="ANTE BREAKDOWN"
                       FontFamily="{StaticResource BalatroFont}"
                       FontSize="18"
                       Foreground="{StaticResource Gold}"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,8"/>

            <!-- Ante List -->
            <ItemsControl ItemsSource="{Binding DisplayAnalysis.Antes}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="{StaticResource EditorDarkBg}"
                                BorderBrush="{StaticResource ModalBorder}"
                                BorderThickness="1"
                                CornerRadius="6"
                                Padding="12"
                                Margin="0,0,0,8">
                            <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto">
                                <!-- Ante Number -->
                                <TextBlock Grid.Row="0"
                                           Text="{Binding AnteTitle}"
                                           FontFamily="{StaticResource BalatroFont}"
                                           FontSize="16"
                                           Foreground="{StaticResource Orange}"
                                           Margin="0,0,0,8"/>

                                <!-- Boss -->
                                <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                                    <TextBlock Text="BOSS:"
                                               FontSize="12"
                                               Foreground="{StaticResource LightGrey}"/>
                                    <TextBlock Text="{Binding BossName}"
                                               FontSize="14"
                                               Foreground="{StaticResource White}"
                                               FontWeight="Bold"/>
                                </StackPanel>

                                <!-- Voucher -->
                                <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,0,0,4">
                                    <TextBlock Text="VOUCHER:"
                                               FontSize="12"
                                               Foreground="{StaticResource LightGrey}"/>
                                    <TextBlock Text="{Binding VoucherName}"
                                               FontSize="14"
                                               Foreground="{StaticResource White}"/>
                                </StackPanel>

                                <!-- Tags -->
                                <StackPanel Grid.Row="3" Orientation="Horizontal" Spacing="16" Margin="0,0,0,4">
                                    <StackPanel Orientation="Horizontal" Spacing="4">
                                        <TextBlock Text="SMALL:"
                                                   FontSize="11"
                                                   Foreground="{StaticResource MediumGrey}"/>
                                        <TextBlock Text="{Binding SmallBlindTag.TagName}"
                                                   FontSize="12"
                                                   Foreground="{StaticResource White}"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Spacing="4">
                                        <TextBlock Text="BIG:"
                                                   FontSize="11"
                                                   Foreground="{StaticResource MediumGrey}"/>
                                        <TextBlock Text="{Binding BigBlindTag.TagName}"
                                                   FontSize="12"
                                                   Foreground="{StaticResource White}"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Shop Items Count -->
                                <TextBlock Grid.Row="4"
                                           Text="{Binding ShopItems.Count, StringFormat='{}{0} shop items'}"
                                           FontSize="11"
                                           Foreground="{StaticResource MediumGrey}"
                                           Margin="0,4,0,0"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Empty State -->
            <TextBlock Text="No analysis available"
                       FontSize="14"
                       Foreground="{StaticResource MediumGrey}"
                       HorizontalAlignment="Center"
                       IsVisible="{Binding !DisplayAnalysis}"/>
        </StackPanel>
    </ScrollViewer>
</UserControl>
