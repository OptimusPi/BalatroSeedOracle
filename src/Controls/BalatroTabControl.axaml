<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="using:BalatroSeedOracle.Controls">

    <!-- Balatro TabControl with automatic triangle indicator -->
    <Style Selector="controls|BalatroTabControl">
        <Setter Property="Template">
            <ControlTemplate>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="12"/>   <!-- Triangle indicator space -->
                        <RowDefinition Height="*"/>    <!-- TabControl -->
                    </Grid.RowDefinitions>

                    <!-- Triangle indicator - positioned automatically above selected tab -->
                    <Canvas Grid.Row="0" Name="PART_TriangleCanvas" ClipToBounds="False" IsHitTestVisible="False">
                        <Polygon Name="PART_TriangleIndicator"
                                 Points="0,0 12,0 6,8"
                                 Classes="balatro-triangle balatro-bounce-vertical"
                                 Canvas.Left="0"
                                 Canvas.Top="0"/>
                    </Canvas>

                    <TabControl Grid.Row="1"
                                Name="PART_TabControl"
                                ItemsSource="{TemplateBinding Items}"
                                SelectedIndex="{TemplateBinding SelectedIndex, Mode=TwoWay}">
                        <TabControl.Styles>
                            <!-- Override TabItem Template to be fully rounded Balatro buttons with shadows -->
                            <Style Selector="TabItem">
                                <Setter Property="FontFamily" Value="{StaticResource BalatroFont}"/>
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="Background" Value="{StaticResource Red}"/>
                                <Setter Property="Foreground" Value="{StaticResource White}"/>
                                <Setter Property="Padding" Value="12,6"/>
                                <Setter Property="Margin" Value="3,0"/>
                                <Setter Property="CornerRadius" Value="4"/>
                                <Setter Property="MinHeight" Value="32"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter Property="Template">
                                    <ControlTemplate>
                                        <Grid Margin="{TemplateBinding Margin}">
                                            <!-- Dark drop shadow - creates 3D effect -->
                                            <Border Name="DropShadow"
                                                    Background="{StaticResource TransparentDark3}"
                                                    CornerRadius="4"
                                                    Margin="1,1,0,0"/>
                                            <!-- Dark bottom shadow -->
                                            <Border Name="BottomShadow"
                                                    Background="{StaticResource HoverShadow}"
                                                    CornerRadius="4"
                                                    Margin="0,1,0,0"/>
                                            <!-- Main tab face -->
                                            <Border Name="TabFace"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="4"
                                                    Padding="{TemplateBinding Padding}"
                                                    Margin="0,0,0,1">
                                                <ContentPresenter Name="PART_ContentPresenter"
                                                                  ContentTemplate="{TemplateBinding HeaderTemplate}"
                                                                  Content="{TemplateBinding Header}"
                                                                  HorizontalAlignment="Center"
                                                                  VerticalAlignment="Center"/>
                                            </Border>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter>
                            </Style>

                            <!-- CRITICAL: Keep selected tabs RED (triangle shows selection, not color) -->
                            <Style Selector="TabItem:selected">
                                <Setter Property="Background" Value="{StaticResource Red}"/>
                                <Setter Property="Foreground" Value="{StaticResource White}"/>
                            </Style>

                            <Style Selector="TabItem:pointerover">
                                <Setter Property="Background" Value="{StaticResource RedHover}"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Style>

                            <Style Selector="TabItem:pressed">
                                <Setter Property="Background" Value="{StaticResource RedHover}"/>
                            </Style>

                            <!-- Hide shadows when pressed for pressed effect -->
                            <Style Selector="TabItem:pressed /template/ Border#DropShadow">
                                <Setter Property="IsVisible" Value="False"/>
                            </Style>
                            <Style Selector="TabItem:pressed /template/ Border#BottomShadow">
                                <Setter Property="IsVisible" Value="False"/>
                            </Style>
                            <!-- Move tab face down when pressed -->
                            <Style Selector="TabItem:pressed /template/ Border#TabFace">
                                <Setter Property="Margin" Value="0,2,0,0"/>
                            </Style>
                        </TabControl.Styles>
                    </TabControl>
                </Grid>
            </ControlTemplate>
        </Setter>
    </Style>
</Styles>
