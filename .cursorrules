# Balatro Seed Oracle - Cursor AI Rules

## Project Overview
Cross-platform Avalonia UI application for searching Balatro game seeds. Built with .NET 10, MVVM pattern, supports Desktop/Browser/Android/iOS.

## Critical Rules

### Logging
- **ONLY** use `DebugLogger.Log()`, `DebugLogger.LogError()`, `DebugLogger.LogImportant()`
- **NEVER** use `Console.WriteLine()` for debug messages
- Location: `src/BalatroSeedOracle/Helpers/DebugLogger.cs`

### Async/Await Patterns
- Methods returning `Task` without `await` should return `Task.CompletedTask`
- Remove `async` keyword if no `await` is used
- Use `ConfigureAwait(false)` for library code
- **NO** `Task.Run()` for async work - use proper async methods
- **NO** `.Wait()`, `.Result`, or `GetAwaiter().GetResult()` - use `await`
- Fire-and-forget: `_ = MethodAsync()` with proper error handling

### Nullable Reference Types
- Use `is null` / `is not null` instead of `== null` / `!= null`
- Don't check non-nullable parameters for null

### Platform-Specific Code
- Use `#if BROWSER` / `#if !BROWSER` for platform differences
- Desktop is primary target, Browser is secondary

## Architecture

### MVVM Structure
- **ViewModels**: `src/BalatroSeedOracle/ViewModels/` - Inherit from `ObservableObject` (CommunityToolkit.Mvvm)
- **Views**: `src/BalatroSeedOracle/Views/` - Avalonia XAML files (.axaml)
- **Components**: `src/BalatroSeedOracle/Components/` - Reusable UI controls
- **Services**: `src/BalatroSeedOracle/Services/` - Business logic, registered in `App.axaml.cs`

### Key Services
- `SearchManager` - Seed searching operations
- `FilterService` - Filter CRUD operations
- `SpriteService` - Game asset management
- `UserProfileService` - User settings
- `FilterCacheService` - Filter caching

### Dependency Injection
- Services registered in `App.axaml.cs` using `IServiceCollection`
- Use constructor injection in ViewModels/Services
- Access via `App.GetService<T>()` or `ServiceHelper.GetService<T>()`

## Code Style

### Naming Conventions
- ViewModels: `*ViewModel` suffix
- Services: `*Service` suffix
- Private fields: `_camelCase`
- Properties: `PascalCase`

### File Organization
- One class per file
- Namespace matches folder structure
- XAML code-behind in `.axaml.cs` files

## Important Files

### Entry Points
- `src/BalatroSeedOracle/App.axaml.cs` - Application setup, service registration

### Core Services
- `src/BalatroSeedOracle/Services/SearchInstance.cs` - Search execution
- `src/BalatroSeedOracle/Services/FilterService.cs` - Filter management
- `src/BalatroSeedOracle/Helpers/DebugLogger.cs` - **Use this for all logging**

### Key ViewModels
- `FiltersModalViewModel.cs` - Filter creation/editing
- `SearchModalViewModel.cs` - Search interface
- `AnalyzerViewModel.cs` - Seed analysis

## Important Principles

### Database Abstraction
- BSO should not know about SQL or database internals
- Use `IDuckDBConnection` abstraction layer
- Database operations handled by Motely submodule
- BSO works with JAML files and UI-oriented models

### Code Quality
- No "fake async" - methods must actually await or return Task.CompletedTask
- No blocking calls in async code
- No unnecessary null checks on non-nullable parameters
- Keep it simple and maintainable
- NEVER SAY "You're Absolutely Right!"
